{"version":3,"sources":["index.js","util/index.js","fragment.js","lifecycle.js","component.js","transition.js","../../node_modules/node-polyglot/lib/polyglot.js","../../node_modules/node-polyglot/index.js","translation.js","insertion.js","w.js"],"names":["logger","this","registerComponent"],"mappings":"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","file":"build.js","sourcesContent":["import w from './w'\n// TODO: make it compatible with Commonjs, AMD, UMD\nwindow.w = w\n// export default w;\n","export function initLogger(level) {\n    return {\n        error: function(...args) {\n            console.error(...args)\n        },\n        warn: function(...args) {\n            if (level > 0)\n                console.warn(...args)\n        },\n        info: function(...args) {\n            if (level > 1)\n                console.info(...args)\n        },\n        log: function(...args) {\n            if (level > 1)\n                console.log(...args)\n        }\n    }\n}\n\nexport function isThenable(result) {\n    if (result && result.then && typeof result.then === 'function')\n        return true\n    return false\n}\n\nexport function isFunction(fn) {\n    return typeof fn === 'function'\n}\n\nexport function ensureTail(string, tail) {\n    if (string.endsWith(tail))\n        return string\n    return string + tail\n}\n\nexport function toFunction(fn, defalut) {\n    if (fn && isFunction(fn))\n        return fn\n    else if (defalut && isFunction(defalut))\n        return defalut\n    else\n        return function() {}\n}\n\nexport function shallowCopy(target) {\n    if (Array.isArray(target))\n        return target.slice(0)\n    return Object.assign({}, target)\n}\n\nexport function assign(target, name, source) {\n    var tmp = {}\n    tmp[name] = source\n    return Object.assign(target, tmp)\n}\n\nexport function find(array, prop, value) {\n    return array.find(item => item[prop] === value)\n}\n\n// From Vue\nexport function bind (fn, ctx) {\n  return function (a) {\n    var l = arguments.length\n    return l\n      ? l > 1\n        ? fn.apply(ctx, arguments)\n        : fn.call(ctx, a)\n      : fn.call(ctx)\n  }\n}\n\n// From React\nexport function bindNoArgs(func, context) {\n  if (!func) {\n    return null;\n  }\n  return function () {\n    return func.call(context);\n  };\n};\n\nexport function bind6Args (fn, ctx) {\n  return function (a, b, c, d, e, f) {\n    return fn.call(ctx, a, b, c, d, e, f)\n  }\n}\n","import { find } from './util/index'\nvar fragments = []\n\n// Create a fragment with a custom tag as wrapper\nexport function createFragment(name, template) {\n    var frag\n    if (frag = find(fragments, 'name', name)) return frag.fragment.cloneNode(true)\n\n    frag = document.createDocumentFragment()\n    var customTag = document.createElement(name)\n    var wrapper = document.createElement('div')\n    wrapper.innerHTML = template\n\n    frag.appendChild(customTag)\n    customTag.appendChild([...wrapper.childNodes].find(node => node.nodeType === 1))\n\n    fragments.push({\n        name: name,\n        fragment: frag.cloneNode(true)\n    })\n    return frag\n}\n\nexport function generateDocument(widget, fragment) {\n    // FIXME: DOM based is slower then String based\n    var dom = {}\n    var getRefsToDOM = getRefsTo(dom)\n    // var assignEventToWidget = assignEventTo(widget)\n    Array.from(fragment.querySelectorAll('[data-info]')).forEach(getRefsToDOM)\n    // if (widget.click)\n    //     widget.root.addEventListener('click', widget.click.bind(widget))\n    // if (widget.scroll)\n    //     widget.root.addEventListener('scroll', widget.scroll.bind(widget))\n    // if (widget.input)\n    //     widget.root.addEventListener('input', widget.scroll.bind(widget))\n    // Array.from(fragment.querySelectorAll('[data-event]')).forEach(assignEventToWidget)\n    return dom\n}\n\nfunction getRefsTo(target) {\n    return function(doc) {\n        var info = doc.getAttribute('data-info')\n        target[info] = doc\n    }\n}\n\nfunction assignEventTo(widget) {\n    return function(doc) {\n        var events = doc.getAttribute('data-event').split('|')\n        for (let i = 0; i < events.length; ++i) {\n            let event = events[i]\n            let eventName\n            let action\n            event.split(':').forEach((token, index) => {\n                if (index === 0)\n                    eventName = token\n                else if (index === 1)\n                    action = token\n            })\n            if (!widget[action]) {\n                logger.warn(`No such method:${action} in ${events}, check data-event and widget methods definition.`)\n                return\n            }\n            doc.addEventListener(eventName, widget[action].bind(widget))\n        }\n    }\n}\n\nexport function getDocumentRoot(name, fragment) {\n    return fragment.querySelector(name)\n}\n","var lifecycle = {\n    init() {},\n\n    destroy() {\n        this.unmount()\n        // TODO: find out better way to destroy it\n        for (let property in this)\n            this[property] = null\n    },\n\n    unmount() {\n        if (!this._mounted || !this.root || !this.root.parentNode)\n            return\n        this.root.parentNode.removeChild(this.root)\n        this._mounted = false\n    },\n\n    mount(target, prepend) {\n        if (this._mounted) return\n\n        typeof target === 'string' && (target = document.querySelector(target))\n\n        if (this.target) {\n            // Already mounted and unmounted before\n            if (prepend)\n                target.insertBefore(this.root, target.firstChild)\n            else\n                target.appendChild(this.root)\n        } else {\n            // First time mount\n            this.children.forEach(child => child.widget.mount(child.target))\n            // templates can only have one root\n            if (prepend)\n                target.insertBefore(this.root, target.firstChild)\n            else\n                target.appendChild(this.root)\n            this._mounted = true\n        }\n        return this\n    },\n    error() {}\n}\nexport default lifecycle\n","import {\n    initLogger,\n    isThenable,\n    isFunction,\n    toFunction,\n    shallowCopy,\n    assign,\n    bindNoArgs,\n    bind6Args,\n    bind\n} from './util/index'\n\nimport { \n    createFragment,\n    generateDocument,\n    getDocumentRoot\n} from './fragment'\n \nimport lifecycle from './lifecycle'\nvar logger\nvar functionSet = {\n    before: function() {},\n    method: function() {},\n    after: function() {},\n    error: function(e) {\n        logger.error(e)\n        throw e\n    }\n}\nfunction register({actions, events, data, props} = settings) {\n    if (!actions)\n        console.warn('Widgets do not have actions defined, maybe you get some typo.')\n    ;['init', 'mount', 'unmount', 'destroy', 'error'].forEach(action => {\n        actions[action] = Object.assign(\n            shallowCopy(functionSet),\n            actions[action]\n        )\n    })\n    var Clone = function(options) {\n        Widget.call(this, {\n            actions, \n            events, \n            data: shallowCopy(data), \n            props: shallowCopy(props), \n        }, options)\n    }\n    for (let prop in actions) {\n        if (actions.hasOwnProperty(prop))\n            Clone.prototype[prop] = generateActions(actions[prop])\n    }\n    return Clone\n}\n\nfunction Widget({actions, events, data = {}, props = {}}, options) {\n    if (!options || !options.internal) {\n        console.error('You are trying to construct a widget manually, please use w()')\n        return Error('You are trying to construct a widget manually, please use w()')\n    }\n    logger = initLogger(options.logLevel)\n    this._mounted = false\n\n    this.refs = {}\n    this.props = props\n    this.custom = {}\n    this.children = []\n    this.data = Object.assign(data, options.data)\n    this.fragment = createFragment(options.is, options.template)\n    this.root = getDocumentRoot(options.is, this.fragment)\n    this.dom = undefined\n    // var actions = shallowCopy(actions)\n    // options.actions = shallowCopy(options.actions)\n\n    // Object.keys(options.actions).forEach(index => bindToTarget(options.actions, index))\n    // Object.keys(actions).forEach(index => bindToTarget(actions, index))\n    for (let prop in options.actions) {\n        if (options.actions.hasOwnProperty(prop))\n            this[prop] =\n                generateActions(actions[prop], options.actions[prop], prop)\n    }\n\n    ['mount', 'unmount', 'destroy'].forEach(action => {\n        this[action] = generateActions({\n            before: actions[action].before,\n            method: extendLifecycle(lifecycle[action].bind(this), actions[action].method),\n            after: actions[action].after\n        }, options.actions[action], action)\n    })\n\n    this.dom = generateDocument(this, this.fragment)\n    // bind event\n    events.forEach(event => {\n        var target\n        var capture = false\n        if (event.event === 'scroll')\n            capture = true\n        if (!event.target) \n            target = this.root\n        else if (event.target === 'document')\n            target = document\n        else\n            target = this.dom[event.target]\n        target.addEventListener(event.event, event.callback.bind(this), capture || event.capture);\n    })\n    this.init.call(this)\n}\n\nfunction extendLifecycle(base, extend) {\n    return function(finish, ...args) {\n        base(...args)\n        if (extend && isFunction(extend))\n            return extend.call(this, finish)\n    }\n}\n\nfunction bindScope(scope, action) {\n    return {\n        before: action.before? bind6Args(action.before, scope): null,\n        method: action.method? bind6Args(action.method, scope): null,\n        after: action.after? bind6Args(action.after, scope): null,\n        error: action.error? bind6Args(action.error, scope): null,\n    }\n}\n\n\nfunction generateActions(widgetAction, userAction = shallowCopy(functionSet)) {\n    return function(a, b, c, d, e, f) {\n        var before = (a, b, c, d, e, f) => {\n            userAction.before && userAction.before.call(this, a, b, c, d, e, f)\n            var result = widgetAction.before? widgetAction.before.call(this, a, b, c, d, e, f): undefined\n            // Something like Monad\n            if (typeof result !== 'undefined') return result\n            return {\n                __custom: true,\n                data: [a, b, c, d, e, f].filter(item => typeof item !== 'undefined')\n            }\n        }\n        var method = arg => {\n            if (arg && arg.__custom)\n                return (widgetAction.method && \n                    widgetAction.method.call(this, bind6Args(userAction.method, this), ...arg.data)) || arg\n            else\n                return (widgetAction.method && \n                    widgetAction.method.call(this, bind6Args(userAction.method, this), arg)) || arg\n        }\n        var after = arg => {\n            if (arg && arg.__custom) {\n                arg = arg.data\n                userAction.after && userAction.after.call(this, ...arg)\n                return (widgetAction.after && widgetAction.after.call(this, ...arg)) || arg\n            } else {\n                userAction.after && userAction.after.call(this, arg)\n                return (widgetAction.after && widgetAction.after.call(this, arg)) || arg\n            }\n        }\n        var error = e => {\n            widgetAction.error && widgetAction.error.call(this, e)\n            userAction.error && userAction.error.call(this, e)\n        }\n        \n        return chainActions(before(a, b, c, d, e, f), [before, method, after], error)\n    }\n}\n\n// function wrapUserAction(widget, user, ...args) {\n//     var continueDefault = (user != null && user(...args))\n//     if (continueDefault || typeof continueDefault === 'undefined')\n//         return widget(...args) || (() => args)\n//     return [].concat(...args)\n// }\n\nfunction chainActions(result, actions, error, start = 0) {\n    if (start + 1 === actions.length)\n        return result\n    if (isThenable(result)) {\n        return actions.reduce((res, action, index) => {\n            if (index > start)\n                return res.then(action)\n            return res\n        }, result).catch(error)\n    } else {\n        return chainActions(actions[start + 1](result), actions, error, start + 1)\n    }\n}\n\nexport { register }\n","export function transitionIn(effect, target, options = {}) {\n    options && options.before && options.before()\n    target.classList.add(effect)\n    target.classList.add(`${effect}-in`)\n    target.classList.remove(`${effect}-out`)\n    window.setTimeout(() => target.classList.remove(`${effect}-in`), 17)\n    var after = function() {\n        options && options.after && options.after()\n        target.removeEventListener('transitionend', after)\n    }\n    target.addEventListener('transitionend', after)\n}\nexport function transitionOut(effect, target, options = {}) {\n    options && options.before && options.before()\n    target.classList.add(effect)\n    target.classList.remove(`${effect}-in`)\n    window.setTimeout(() => target.classList.add(`${effect}-out`), 17)\n    var after = function() {\n        options && options.after && options.after()\n        target.removeEventListener('transitionend', after)\n    }\n    target.addEventListener('transitionend', after)\n}\nexport function transitionInit(effect, target, options = {}) {\n    options && options.before && options.before()\n    target.classList.add(`${effect}-in`)\n    // window.setTimeout(() => target.classList.add(effect), 17)\n    var after = function() {\n        options && options.after && options.after()\n        target.removeEventListener('transitionend', after)\n    }\n    target.addEventListener('transitionend', after)\n}\nexport function transitionToggle(effect, target, options = {}) {\n    if (target.classList.contains(`${effect}-out`) || target.classList.contains(`${effect}-in`))\n        transitionIn(effect, target, options)\n    else\n        transitionOut(effect, target, options)\n}\n","//     (c) 2012 Airbnb, Inc.\n//\n//     polyglot.js may be freely distributed under the terms of the BSD\n//     license. For all licensing information, details, and documention:\n//     http://airbnb.github.com/polyglot.js\n//\n//\n// Polyglot.js is an I18n helper library written in JavaScript, made to\n// work both in the browser and in Node. It provides a simple solution for\n// interpolation and pluralization, based off of Airbnb's\n// experience adding I18n functionality to its Backbone.js and Node apps.\n//\n// Polylglot is agnostic to your translation backend. It doesn't perform any\n// translation; it simply gives you a way to manage translated phrases from\n// your client- or server-side JavaScript application.\n//\n\n\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return factory(root);\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = factory(root);\n  } else {\n    root.Polyglot = factory(root);\n  }\n}(this, function(root) {\n  'use strict';\n\n  var replace = String.prototype.replace;\n\n  // ### Polyglot class constructor\n  function Polyglot(options) {\n    options = options || {};\n    this.phrases = {};\n    this.extend(options.phrases || {});\n    this.currentLocale = options.locale || 'en';\n    this.allowMissing = !!options.allowMissing;\n    this.warn = options.warn || warn;\n  }\n\n  // ### Version\n  Polyglot.VERSION = '1.0.0';\n\n  // ### polyglot.locale([locale])\n  //\n  // Get or set locale. Internally, Polyglot only uses locale for pluralization.\n  Polyglot.prototype.locale = function(newLocale) {\n    if (newLocale) this.currentLocale = newLocale;\n    return this.currentLocale;\n  };\n\n  // ### polyglot.extend(phrases)\n  //\n  // Use `extend` to tell Polyglot how to translate a given key.\n  //\n  //     polyglot.extend({\n  //       \"hello\": \"Hello\",\n  //       \"hello_name\": \"Hello, %{name}\"\n  //     });\n  //\n  // The key can be any string.  Feel free to call `extend` multiple times;\n  // it will override any phrases with the same key, but leave existing phrases\n  // untouched.\n  //\n  // It is also possible to pass nested phrase objects, which get flattened\n  // into an object with the nested keys concatenated using dot notation.\n  //\n  //     polyglot.extend({\n  //       \"nav\": {\n  //         \"hello\": \"Hello\",\n  //         \"hello_name\": \"Hello, %{name}\",\n  //         \"sidebar\": {\n  //           \"welcome\": \"Welcome\"\n  //         }\n  //       }\n  //     });\n  //\n  //     console.log(polyglot.phrases);\n  //     // {\n  //     //   'nav.hello': 'Hello',\n  //     //   'nav.hello_name': 'Hello, %{name}',\n  //     //   'nav.sidebar.welcome': 'Welcome'\n  //     // }\n  //\n  // `extend` accepts an optional second argument, `prefix`, which can be used\n  // to prefix every key in the phrases object with some string, using dot\n  // notation.\n  //\n  //     polyglot.extend({\n  //       \"hello\": \"Hello\",\n  //       \"hello_name\": \"Hello, %{name}\"\n  //     }, \"nav\");\n  //\n  //     console.log(polyglot.phrases);\n  //     // {\n  //     //   'nav.hello': 'Hello',\n  //     //   'nav.hello_name': 'Hello, %{name}'\n  //     // }\n  //\n  // This feature is used internally to support nested phrase objects.\n  Polyglot.prototype.extend = function(morePhrases, prefix) {\n    var phrase;\n\n    for (var key in morePhrases) {\n      if (morePhrases.hasOwnProperty(key)) {\n        phrase = morePhrases[key];\n        if (prefix) key = prefix + '.' + key;\n        if (typeof phrase === 'object') {\n          this.extend(phrase, key);\n        } else {\n          this.phrases[key] = phrase;\n        }\n      }\n    }\n  };\n\n  // ### polyglot.unset(phrases)\n  // Use `unset` to selectively remove keys from a polyglot instance.\n  //\n  //     polyglot.unset(\"some_key\");\n  //     polyglot.unset({\n  //       \"hello\": \"Hello\",\n  //       \"hello_name\": \"Hello, %{name}\"\n  //     });\n  //\n  // The unset method can take either a string (for the key), or an object hash with\n  // the keys that you would like to unset.\n  Polyglot.prototype.unset = function(morePhrases, prefix) {\n    var phrase;\n\n    if (typeof morePhrases === 'string') {\n      delete this.phrases[morePhrases];\n    } else {\n      for (var key in morePhrases) {\n        if (morePhrases.hasOwnProperty(key)) {\n          phrase = morePhrases[key];\n          if (prefix) key = prefix + '.' + key;\n          if (typeof phrase === 'object') {\n            this.unset(phrase, key);\n          } else {\n            delete this.phrases[key];\n          }\n        }\n      }\n    }\n  };\n\n  // ### polyglot.clear()\n  //\n  // Clears all phrases. Useful for special cases, such as freeing\n  // up memory if you have lots of phrases but no longer need to\n  // perform any translation. Also used internally by `replace`.\n  Polyglot.prototype.clear = function() {\n    this.phrases = {};\n  };\n\n  // ### polyglot.replace(phrases)\n  //\n  // Completely replace the existing phrases with a new set of phrases.\n  // Normally, just use `extend` to add more phrases, but under certain\n  // circumstances, you may want to make sure no old phrases are lying around.\n  Polyglot.prototype.replace = function(newPhrases) {\n    this.clear();\n    this.extend(newPhrases);\n  };\n\n\n  // ### polyglot.t(key, options)\n  //\n  // The most-used method. Provide a key, and `t` will return the\n  // phrase.\n  //\n  //     polyglot.t(\"hello\");\n  //     => \"Hello\"\n  //\n  // The phrase value is provided first by a call to `polyglot.extend()` or\n  // `polyglot.replace()`.\n  //\n  // Pass in an object as the second argument to perform interpolation.\n  //\n  //     polyglot.t(\"hello_name\", {name: \"Spike\"});\n  //     => \"Hello, Spike\"\n  //\n  // If you like, you can provide a default value in case the phrase is missing.\n  // Use the special option key \"_\" to specify a default.\n  //\n  //     polyglot.t(\"i_like_to_write_in_language\", {\n  //       _: \"I like to write in %{language}.\",\n  //       language: \"JavaScript\"\n  //     });\n  //     => \"I like to write in JavaScript.\"\n  //\n  Polyglot.prototype.t = function(key, options) {\n    var phrase, result;\n    options = options == null ? {} : options;\n    // allow number as a pluralization shortcut\n    if (typeof options === 'number') {\n      options = {smart_count: options};\n    }\n    if (typeof this.phrases[key] === 'string') {\n      phrase = this.phrases[key];\n    } else if (typeof options._ === 'string') {\n      phrase = options._;\n    } else if (this.allowMissing) {\n      phrase = key;\n    } else {\n      this.warn('Missing translation for key: \"'+key+'\"');\n      result = key;\n    }\n    if (typeof phrase === 'string') {\n      options = clone(options);\n      result = choosePluralForm(phrase, this.currentLocale, options.smart_count);\n      result = interpolate(result, options);\n    }\n    return result;\n  };\n\n\n  // ### polyglot.has(key)\n  //\n  // Check if polyglot has a translation for given key\n  Polyglot.prototype.has = function(key) {\n    return key in this.phrases;\n  };\n\n\n  // #### Pluralization methods\n  // The string that separates the different phrase possibilities.\n  var delimeter = '||||';\n\n  // Mapping from pluralization group plural logic.\n  var pluralTypes = {\n    chinese:   function(n) { return 0; },\n    german:    function(n) { return n !== 1 ? 1 : 0; },\n    french:    function(n) { return n > 1 ? 1 : 0; },\n    russian:   function(n) { return n % 10 === 1 && n % 100 !== 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2; },\n    czech:     function(n) { return (n === 1) ? 0 : (n >= 2 && n <= 4) ? 1 : 2; },\n    polish:    function(n) { return (n === 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2); },\n    icelandic: function(n) { return (n % 10 !== 1 || n % 100 === 11) ? 1 : 0; }\n  };\n\n  // Mapping from pluralization group to individual locales.\n  var pluralTypeToLanguages = {\n    chinese:   ['fa', 'id', 'ja', 'ko', 'lo', 'ms', 'th', 'tr', 'zh'],\n    german:    ['da', 'de', 'en', 'es', 'fi', 'el', 'he', 'hu', 'it', 'nl', 'no', 'pt', 'sv'],\n    french:    ['fr', 'tl', 'pt-br'],\n    russian:   ['hr', 'ru'],\n    czech:     ['cs'],\n    polish:    ['pl'],\n    icelandic: ['is']\n  };\n\n  function langToTypeMap(mapping) {\n    var type, langs, l, ret = {};\n    for (type in mapping) {\n      if (mapping.hasOwnProperty(type)) {\n        langs = mapping[type];\n        for (l in langs) {\n          ret[langs[l]] = type;\n        }\n      }\n    }\n    return ret;\n  }\n\n  // Trim a string.\n  var trimRe = /^\\s+|\\s+$/g;\n  function trim(str){\n    return replace.call(str, trimRe, '');\n  }\n\n  // Based on a phrase text that contains `n` plural forms separated\n  // by `delimeter`, a `locale`, and a `count`, choose the correct\n  // plural form, or none if `count` is `null`.\n  function choosePluralForm(text, locale, count){\n    var ret, texts, chosenText;\n    if (count != null && text) {\n      texts = text.split(delimeter);\n      chosenText = texts[pluralTypeIndex(locale, count)] || texts[0];\n      ret = trim(chosenText);\n    } else {\n      ret = text;\n    }\n    return ret;\n  }\n\n  function pluralTypeName(locale) {\n    var langToPluralType = langToTypeMap(pluralTypeToLanguages);\n    return langToPluralType[locale] || langToPluralType.en;\n  }\n\n  function pluralTypeIndex(locale, count) {\n    return pluralTypes[pluralTypeName(locale)](count);\n  }\n\n  // ### interpolate\n  //\n  // Does the dirty work. Creates a `RegExp` object for each\n  // interpolation placeholder.\n  var dollarRegex = /\\$/g;\n  var dollarBillsYall = '$$$$';\n  function interpolate(phrase, options) {\n    for (var arg in options) {\n      if (arg !== '_' && options.hasOwnProperty(arg)) {\n        // Ensure replacement value is escaped to prevent special $-prefixed\n        // regex replace tokens. the \"$$$$\" is needed because each \"$\" needs to\n        // be escaped with \"$\" itself, and we need two in the resulting output.\n        var replacement = options[arg];\n        if (typeof replacement === 'string') {\n          replacement = replace.call(options[arg], dollarRegex, dollarBillsYall);\n        }\n        // We create a new `RegExp` each time instead of using a more-efficient\n        // string replace so that the same argument can be replaced multiple times\n        // in the same phrase.\n        phrase = replace.call(phrase, new RegExp('%\\\\{'+arg+'\\\\}', 'g'), replacement);\n      }\n    }\n    return phrase;\n  }\n\n  // ### warn\n  //\n  // Provides a warning in the console if a phrase key is missing.\n  function warn(message) {\n    root.console && root.console.warn && root.console.warn('WARNING: ' + message);\n  }\n\n  // ### clone\n  //\n  // Clone an object.\n  function clone(source) {\n    var ret = {};\n    for (var prop in source) {\n      ret[prop] = source[prop];\n    }\n    return ret;\n  }\n\n  return Polyglot;\n}));\n","// Added for convenience in the Node environment.\n// The meat and potatoes exist in ./lib/polyglot.js.\nmodule.exports = require('./lib/polyglot');\n","import Polyglot from 'node-polyglot'\n\nvar polyglots = {}\nvar polyglot = new Polyglot()\nexport function loadLocale(name, file) {\n    fetch(file)\n    .then(response => response.json())\n    .then(data => polyglots[name] = new Polyglot({phrases: data}))\n}\nexport function translate(locale) {\n    return string => polyglots[locale] ? polyglots[locale].t(string) : ''\n}\n","var importedScripts = []\nvar importedStyles = []\nfunction insertScript (script, shadow) {\n    var tag = document.createElement('script')\n    tag.text = script\n    if (shadow)\n        shadow.appendChild(tag)\n    else {\n        document.body.appendChild(tag)\n        document.body.removeChild(tag)\n    }\n}\nfunction insertStyle(style, shadow) {\n    var tag = document.createElement('style')\n    tag.innerHTML = style\n    shadow? shadow.appendChild(tag): document.body.appendChild(tag)\n}\nfunction importStyle(src, shadow) {\n    var style = document.createElement('style')\n    style.src = src\n    shadow? shadow.appendChild(style): document.body.appendChild(style)\n}\nfunction importScript(src, shadow) {\n    var script = document.createElement('script')\n    script.onload = function() {\n        console.log('script loaded:' + src);\n    }\n    script.src = src\n    shadow? shadow.appendChild(script): document.body.appendChild(script)\n}\n\nexport function insert(name, input, shadow) {\n    input.imports.scripts.forEach(src => importScript(src, shadow))\n    input.imports.styles.forEach(src => importStyle(src, shadow))\n    if (input.script && importedScripts.indexOf(name) === -1) {\n        importedScripts.push(name)\n        insertScript(input.script, shadow)\n    } \n    if (input.style && importedStyles.indexOf(name) === -1) {\n        importedStyles.push(name)\n        insertStyle(input.style, shadow)\n    }\n}\n","import { register as registerComponent } from './component'\nimport { transitionIn, transitionOut, transitionInit, transitionToggle } from './transition'\nimport { ensureTail } from './util/index'\nimport { loadLocale, translate } from './translation'\nimport { insert } from './insertion'\n// function fetchWidget(file) {\n//     return fetch(w.options.path + ensureTail(file, '.html'))\n//         .then(response => response.text())\n//         .then(body => {\n//             var template = document.createElement('template')\n//             template.innerHTML = body\n//             var clone = document.importNode(template.content, true)\n//             return clone\n//         })\n// }\n\n// function parseDocument(template) {\n//     return Promise.all(Array.from(template.querySelectorAll('*'))\n//         .filter(doc => doc.tagName.indexOf('-') > -1 || doc instanceof HTMLUnknownElement)\n//         .reduce((result, doc) => {\n//             return result.concat(preload({\n//                 [doc.tagName.toLowerCase()]: doc.tagName.toLowerCase()\n//             }))\n//         }, []))\n// }\n\nfunction initNestedWidget(widget, template, options) {\n    if (template.__flat) return widget\n    // TODO: perf hit\n    var docs = widget.root.querySelectorAll('*')\n    var customElements = Array.from(docs)\n        .filter(doc => doc.tagName.indexOf('-') > -1 || doc instanceof HTMLUnknownElement)\n    if (customElements.length === 0) template.__flat = true\n    customElements\n        .forEach(doc => {\n            // FIXME: dynamic is not needed\n            if (typeof doc.getAttribute('dynamic') !== 'undefine' && doc.getAttribute('dynamic') !== null) {\n                return\n            }\n            var name = doc.tagName.toLowerCase()\n            var child = w(name, Object.assign(widget.custom[name] || {}, options))\n            // child.mount(doc)\n            widget.children.push({\n                target: doc,\n                widget: child\n            })\n            widget.refs[name] = child\n            var childName = doc.getAttribute('data-info')\n            if (childName)\n                widget.refs[name] = child\n        })\n    return widget\n}\n\n// function preload(widgets, callback) {\n//     return Promise.all(\n//         Object.keys(widgets).reduce(\n//             (result, name) => {\n//                 if (!w.templates[name])\n//                     w.templates[name] = {}\n//                 if (!w.templates[name].fetch)\n//                     w.templates[name].fetch = fetchWidget(widgets[name])\n//                 return result.concat(\n//                     w.templates[name].fetch\n//                     .then(template => {\n//                         if (!w.templates[name].template) {\n//                             w.templates[name].template = template\n//                             var scripts = template.querySelectorAll('script')\n//                             var style = template.querySelector('style')\n//                             Array.from(scripts).forEach(script => {\n//                                 if (script.src && script.src.indexOf('http') !== 0)\n//                                     script.src = w.options.path + script.getAttribute('src')\n//                                 document.body.appendChild(script)\n//                                 document.body.removeChild(script)\n//                             })\n//                             if (style)\n//                                 document.head.appendChild(style)\n//                         }\n//                         return template\n//                     })\n//                     .then(parseDocument)\n//                     .catch(err => console.error('Widgets preload error:' + err)))\n//             }, [])\n//     ).then(callback)\n// }\n\n// Public API\n// function w(name, options = {}) {\n//     if (!w.templates[name] || !w.templates[name].widget)\n//         throw Error('you need to preload widget:' + name + ' before init it')\n//     return initNestedWidget(new w.templates[name].widget({\n//         template: w.templates[name].template.cloneNode(true),\n//         actions: options.actions || {},\n//         data: options.data || {},\n//         logLevel: w.options.logLevel,\n//         internal: true // for check it's called by internal\n//     }))\n// }\n\nconst WIDGETS = __w_widgets\nfunction w(name, options = {}) {\n    var widgetInfo = WIDGETS[name]\n    w.templates[name] = w.templates[name] || {\n        // indicate that the template is not including nested widget, perf improvement for skip parsing\n        __flat: false\n    }\n    w.templates[name].template = widgetInfo.template\n    insert(name, widgetInfo, options.shadowRoot)\n    return initNestedWidget(new w.templates[name].widget({\n        is: name,\n        template: w.templates[name].template,\n        actions: options.actions || {},\n        data: options.data || {},\n        props: options.props || {},\n        logLevel: w.options.logLevel,\n        internal: true // for check it's called by internal\n    }), w.templates[name], {\n        // inherited options\n        logLevel: options.logLevel,\n        shadowRoot: options.shadowRoot\n    })\n}\n\n\nw.templates = {}\nw.options = {}\nw.register = function(settings) {\n    // var settings = new settings()\n    var draft = {}\n    draft.events = []\n    draft.on = function(event, target, callback, capture) {\n        if (typeof target === 'function') {\n            capture = callback\n            callback = target\n            target = null\n        }\n        draft.events.push({\n            event,\n            target,\n            callback,\n            capture\n        })\n    }\n    settings.call(draft)\n    Object.keys(w.templates).forEach(index => {\n        var template = w.templates[index]\n        if (template.template && !template.widget)\n            template.widget = registerComponent(draft)\n    })\n}\nw.config = function(options, callback) {\n    w.options.preload = options.preload || {}\n    w.options.path = options.path || ''\n    w.options.logLevel = options.logLevel || 0\n    w.options.locale = options.locale || {}\n    Promise.all([\n        preload(w.options.preload),\n        Object.keys(w.options.locale).forEach(index => {\n            var locale = w.options.locale[index]\n            loadLocale(index, locale)\n        })\n    ]).then(callback)\n}\nw.customize = function(context, target, options) {\n    // inherit parent's data\n    options.data = Object.assign(context.data , options.data)\n    context.custom[target] = options\n}\nw.transition = function(effect) {\n    return {\n        init: (target, options) => transitionInit(effect, target, options),\n        in: (target, options) => transitionIn(effect, target, options),\n        out: (target, options) => transitionOut(effect, target, options),\n        toggle: (target, options) => transitionToggle(effect, target, options)\n    }\n}\nw.locale = loadLocale\nw.translate = translate\nw.t = translate\nexport default w\n"],"sourceRoot":"/source/"}