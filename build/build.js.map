{"version":3,"sources":["index.js","services/rc-sdk.js","service.js","services/login-service.js","services/rc-subscription-service.js","services/call-log-service.js","services/rc-webphone.js","services/phone-service.js","services/rc-contact-service.js","services/contact-search-service.js","services/rc-contact-search-provider.js","services/account-service.js","services/rc-message-service.js","services/rc-conversation-service.js","services/rc-message-provider.js","services/rc-conference-service.js","adapters/contact-detail-adapter.js","action.js","actions/interaction.js","util/index.js","component.js","transition.js","../../node_modules/node-polyglot/lib/polyglot.js","../../node_modules/node-polyglot/index.js","translation.js","w.js"],"names":["callLogService","register","this","registerComponent"],"mappings":"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","file":"build.js","sourcesContent":["// services\nimport LoginService from './services/login-service'\nimport CallLogService from './services/call-log-service'\nimport PhoneService from './services/phone-service'\nimport rcContactService from './services/rc-contact-service'\nimport contactSearchService from './services/contact-search-service'\nimport rcContactSearchProvider from './services/rc-contact-search-provider'\nimport accountService from './services/account-service'\nimport rcConversationService from './services/rc-conversation-service'\nimport rcMessageService from './services/rc-message-service'\nimport rcMessageProvider from './services/rc-message-provider'\nimport rcSubscription from './services/rc-subscription-service'\nimport rcConferenceSerivce from './services/rc-conference-service'\n\n//adapters\nimport contactDetailWidgetAdapter from './adapters/contact-detail-adapter'\n\n// actions\nimport interaction from './actions/interaction'\nimport w from './w'\n// development only\nwindow.w = w\n// export default w;\n","var sdk = new RingCentral.SDK({\n    appKey: '8mOtYiilT5OUPwwdeGgvpw',\n    appSecret: 'cqNn89RmR2SR76Kpp8xJaAdNzNOqR8Qfmjb0B-gDOHTw',\n    server: RingCentral.SDK.server.production\n})\n\nexport default sdk\n","var services = {}\nfunction register(name, service) {\n    services[name] = service\n}\nfunction getServices() {\n    return services\n}\nexport {\n    register,\n    getServices\n}\n","import sdk from './rc-sdk'\nimport { register } from '../service'\nvar LoginService = function(sdk) {\n    var onLoginHandler = []\n    return {\n        login: function(username, extension, password) {\n            return sdk.platform()\n                .login({\n                    'username': username,\n                    'extension': extension,\n                    'password': password\n                })\n        },\n        logout: function() {\n            return sdk.platform().logout()\n        },\n        checkLoginStatus: function() {\n            return sdk.platform().loggedIn().then(function(isLoggedIn) {\n                if (isLoggedIn) {\n                    onLoginHandler.forEach(handler => handler())\n                }\n                return isLoggedIn\n            })\n        },\n\n    }\n}(sdk)\nregister('loginService', LoginService)\n","import sdk from './rc-sdk'\nimport { register } from '../service'\n\nvar rcSubscription = function() {\n\n    var cacheKey = 'ringcentral-subscription'\n    var subscription = sdk.createCachedSubscription(cacheKey).restore()\n    var handlers = {}\n    subscription.on(subscription.events.notification, function(msg) {\n        console.log('update from pubnub');\n        for (var key in handlers) {\n            if (handlers.hasOwnProperty(key)) {\n                if (msg.event.indexOf(key) > -1) {\n                    handlers[key].forEach(h => {\n                        try {\n                            h(msg)\n                        } catch (e) {\n                            console.error('Error occurs when invoking subscription notification handler for \"' +\n                        msg.event + '\": ' + e)\n                        }\n                    })\n                }\n            }\n        }\n    })\n\n    return {\n        subscribe: function(suffix, event, handler) {\n            if (event && suffix) {\n                if (!handlers[suffix]) {\n                    handlers[suffix] = []\n                }\n                handlers[suffix].push(handler)\n                subscription.addEventFilters(event).register()\n            }\n        }\n    }\n}()\n\nregister('rcSubscription', rcSubscription)\nexport default rcSubscription\n","import sdk from './rc-sdk'\nimport rcSubscription from './rc-subscription-service'\nimport { register } from '../service'\n\nvar CallLogService = (function(sdk) {\n    var period = 7 * 24 * 3600 * 1000\n    var dateFrom = new Date(Date.now() - (period))\n    return {\n        getCallLogs: function() {\n            return sdk.platform()\n                .get('/account/~/extension/~/call-log', {dateFrom: dateFrom.toISOString()})\n                .then(response => {\n                    return response.json().records\n                })\n        },\n        getCallLogsByNumber: function(phoneNumber, hourFrom, hourTo) {\n            return sdk.platform()\n                .get('/account/~/extension/~/call-log', {\n                    dateFrom: new Date(Date.now() - hourFrom * 3600 * 1000).toISOString(),\n                    dateTo: new Date(Date.now() - (hourTo || 0) * 3600 * 1000).toISOString(),\n                    phoneNumber\n                })\n                .then(response => response.json())\n                .then(data => data.records)\n                .then(records => records.reverse())\n        }\n    }\n})(sdk)\n\nregister('callLogService', CallLogService)\nexport default CallLogService\n","var webPhone = new RingCentral.WebPhone({\n    audioHelper: {}\n})\n\nexport default webPhone\n","import sdk from './rc-sdk'\nimport webPhone from './rc-webphone'\nimport { register } from '../service'\n\nvar PhoneService = function() {\n    var line\n    var handlers = {\n        called: [],\n        callStarted: [],\n        callRejected: [],\n        callEnded: [],\n        callFailed: []\n    }\n    return {\n        registerSIP: function() {\n            return sdk.platform()\n                .post('/client-info/sip-provision', {\n                    sipInfo: [{\n                        transport: 'WSS'\n                    }]\n                })\n                .then(res => {\n                    return webPhone.register(res.json(), false)\n                        .catch(function(e) {\n                            return Promise.reject(err)\n                        })\n                })\n        },\n        callout: function(fromNumber, toNumber) {\n            // TODO: validate toNumber and fromNumber\n            if (!sdk || !webPhone) {\n                throw Error('Need to set up SDK and webPhone first.')\n                return\n            }\n            return sdk.platform()\n                .get('/restapi/v1.0/account/~/extension/~')\n                .then(res => {\n                    var info = res.json()\n                    if (info && info.regionalSettings && info.regionalSettings.homeCountry) {\n                        return info.regionalSettings.homeCountry.id\n                    }\n                    return null\n                })\n                .then(countryId => {\n                    webPhone.call(toNumber, fromNumber, countryId)\n                })\n        },\n        answer: function() {\n            return webPhone\n                .answer(line)\n        },\n        ignore: function() {},\n        cancel: function() {\n            return line\n                .cancel()\n        },\n        hangup: function() {\n            return webPhone\n                .hangup(line)\n        },\n        on: function(name, handler) {\n            handlers[name].push(handler)\n        },\n        listen: function() {\n            webPhone.ua.on('incomingCall', e => {\n                line = e\n                handlers.called.forEach(h => h(e))\n            })\n            webPhone.ua.on('callStarted', e => {\n                handlers.callStarted.forEach(h => h(e))\n            })\n            webPhone.ua.on('callRejected', e => {\n                handlers.callRejected.forEach(h => h(e))\n            })\n            webPhone.ua.on('callEnded', e => {\n                handlers.callEnded.forEach(h => h(e))\n            })\n            webPhone.ua.on('callFailed', e => {\n                handlers.callFailed.forEach(h => h(e))\n            })\n        },\n    }\n}()\nregister('phoneService', PhoneService)\n","import sdk from './rc-sdk'\nimport { register } from '../service'\n\nvar rcContactService = function(sdk) {\n    var companyContacts = []\n    var completeCompanyContacts = null\n    \n    var fetchingCompanyContacts = null\n    var fetchingCompleteCompanyContacts = null\n\n    function Contact() {\n        this.firstName = null\n        this.lastName = null\n        this.displayName = null\n        this.extension = null\n        this.email = null\n        this.type = null\n        this.id = null\n        this.phoneNumber = []\n    }\n\n    function createContact(extension) {\n        var contact = new Contact()\n        contact.extension = extension.extensionNumber\n        contact.firstName = extension.contact.firstName\n        contact.lastName = extension.contact.lastName\n        contact.displayName = contact.firstName + ' ' + contact.lastName\n        contact.email = extension.contact.email\n        contact.type = 'rc'\n        contact.id  = extension.id\n        contact.profileImage = extension.profileImage.uri\n        return contact\n    }\n\n    function addToCompanyContact(response) {\n        var records = response.json().records\n           .filter(extension =>\n                extension.status === 'Enabled' &&\n                ['DigitalUser', 'User'].indexOf(extension.type) >= 0)\n           .map(extension => createContact(extension))\n        companyContacts.push.apply(companyContacts, records)\n    }\n\n    function fetchCompanyContactByPage(page) {\n        return sdk.platform().get('/account/~/extension/', {perPage: 250, page: page})\n    }\n\n    function fetchCompanyDirectNumbersByPage(page) {\n        return sdk.platform().get('/account/~/phone-number', {perPage: 250, page: page})\n    }\n\n    function fetchCompanyContacts() {\n        var page = 1\n        fetchingCompanyContacts = fetchCompanyContactByPage(page)\n            .then(function(response) {\n                var respObj = response.json()\n                if (respObj.paging && respObj.paging.totalPages > page) {\n                    var promises = []\n                    while (respObj.paging.totalPages > page) {\n                        page++\n                        promises.push(fetchCompanyContactByPage(page))\n                    }\n\n                    return Promise.all(promises).then(responses=> {\n                        responses.forEach(function(response) {\n                            addToCompanyContact(response)\n                        })\n                        fetchingCompanyContacts = null\n                        return companyContacts\n                    })\n                }else {\n                    addToCompanyContact(response)\n                    return companyContacts\n                }\n            }).catch(function(e) {\n                console.error(e)\n            })\n        return fetchingCompanyContacts\n    }\n\n    function fetchCompanyDirectNumbers() {\n        var page = 1\n        return fetchCompanyDirectNumbersByPage(page)\n        .then(response => {\n            var respObj = response.json()\n            if (respObj.paging && respObj.paging.totalPages > page) {\n                var promises = []\n                while (respObj.paging.totalPages > page) {\n                    page++\n                    promises.push(fetchCompanyDirectNumbersByPage(page))\n                }\n\n                return Promise.all(promises).then(responses => {\n                    var numbers = {}\n                    responses.forEach(response => {\n                        var resp = response.json()\n                        resp.records.forEach(el => {\n                            if (el.extension && el.extension.extensionNumber) {\n                                if (!numbers[el.extension.extensionNumber]) {\n                                    numbers[el.extension.extensionNumber] = []\n                                }\n\n                                numbers[el.extension.extensionNumber].push(el)\n                            }\n                        })\n                    })\n                    companyContacts.forEach(contact => {\n                        var phones = numbers[contact.extension]\n                        if (phones) {\n                            phones.forEach(phone => {\n                                contact.phoneNumber.push(phone.phoneNumber)\n                            })\n                        }\n                    })\n                })\n            }\n        })\n    }\n\n    return {\n        companyContacts: companyContacts,\n        asyncGetCompanyContact: function() {\n            if (fetchingCompanyContacts) {\n                return fetchingCompanyContacts\n            }else {\n                return Promise.resolve(companyContacts)\n            }\n        },\n        syncCompanyContact: function() {\n            companyContacts.length = 0\n            fetchCompanyContacts()\n            fetchCompanyDirectNumbers()\n        },\n        completeCompanyContact: function() {\n            if (completeCompanyContacts) \n                return Promise.resolve(completeCompanyContacts)\n            if (fetchingCompleteCompanyContacts)\n                return fetchingCompleteCompanyContacts\n            fetchingCompleteCompanyContacts = fetchCompanyContacts().then(fetchCompanyDirectNumbers)\n            return fetchingCompleteCompanyContacts.then(() => {\n                completeCompanyContacts = companyContacts\n                fetchingCompleteCompanyContacts = null\n                return companyContacts\n            })\n        }\n    }\n}(sdk)\n\nregister('rcContactService', rcContactService)\nexport default rcContactService\n","import { register } from '../service'\nvar contactSearchService = (function() {\n    var searchProviders = []\n    var queryCompletedHandlers = []\n\n    function createResult(item) {\n        return {\n            name: item.name,\n            value: item.value,\n            type: item.type,\n            id: item.id\n        }\n    }\n    return {\n        query: function(searchFunctions, filter) {\n            return Promise.all(searchFunctions).then(results => {\n                var searchResultsKeys = {}\n                var searchResults = []\n                results.forEach(result => {\n                    result.forEach(item => {\n                        if (filter) {\n                            if (filter(item)) {\n                                var key = item.name + item.value\n                                if (!searchResultsKeys[key]) {\n                                    var toAddItem = createResult(item)\n                                    searchResultsKeys[key] = toAddItem\n                                    searchResults.push(toAddItem)\n                                }\n                            }\n                        } else {\n                            var key = item.name + item.value\n                            if (!searchResultsKeys[key]) {\n                                var toAddItem = createResult(item)\n                                searchResultsKeys[key] = toAddItem\n                                searchResults.push(toAddItem)\n                            }\n                        }\n                    })\n                })\n                return searchResults\n            })\n        },\n    }\n})()\nregister('contactSearchService', contactSearchService)\nexport default contactSearchService\n","import rcContactService from './rc-contact-service'\nimport { register } from '../service'\nvar rcContactSearchProvider = function() {\n    return {\n        search: function(text) {\n            var results = []\n            if (text) {\n                text = text.toLowerCase()\n                rcContactService.companyContacts.map(contact => {\n                    if (contact.displayName && contact.displayName.toLowerCase().indexOf(text) >= 0) {\n                        results.push({\n                            name: contact.displayName,\n                            value: contact.extension,\n                            type: 'rc',\n                            id: contact.id,\n                        })\n                        contact.phoneNumber.forEach(phone => {\n                            results.push({\n                                name: contact.displayName,\n                                value: phone,\n                                type: 'rc',\n                                id: contact.id,\n                            })\n                        })\n                    } else {\n                        if (contact.extension && contact.extension.indexOf(text) >= 0) {\n                            results.push({\n                                name: contact.displayName,\n                                value: contact.extension,\n                                type: 'rc',\n                                id: contact.id,\n                            })\n                        }\n\n                        contact.phoneNumber.forEach(phone => {\n                            if (phone.indexOf(text) >= 0) {\n                                results.push({\n                                    name: contact.displayName,\n                                    value: phone,\n                                    type: 'rc',\n                                    id: contact.id,\n                                })\n                            }\n                        })\n                    }\n                })\n            }\n\n            return results\n        },\n        searchAll: function() {\n            return rcContactService.completeCompanyContact().then(companyContacts => {\n                return companyContacts.map(contact => {\n                    return {\n                        name: contact.displayName,\n                        type: 'rc',\n                        id: contact.id,\n                    }\n                });\n            }).catch(e => console.error(e))\n        }\n    }\n}()\n\nregister('rcContactSearchProvider', rcContactSearchProvider)\nexport default rcContactSearchProvider\n","import sdk from './rc-sdk'\nimport { register } from '../service'\nvar accountService = (function(sdk) {\n    var info\n    var numbers\n    var fetchNumbers = null\n\n    function getNumbersByType(numbers, type) {\n        if (!numbers)\n                return Error('Need to fetch numbers first using accountService.getPhoneNumber')\n        return numbers\n            .filter(number => number.type === type)\n    }\n\n    function getNumbersByFeatures(numbers, features) {\n        if (!Array.isArray(features))\n            features = [features]\n        // if has duplicate features\n        return numbers\n            .filter(number => features.filter(f => number.features.indexOf(f) > -1).length > 0)\n    }\n\n    return {\n        getAccountInfo: function() {\n            return sdk.platform()\n                .get('/account/~/extension/~')\n                .then(response => {\n                    info = response.json()\n                    return info\n                })\n                .catch(e => console.error('Recent Calls Error: ' + e.message))\n        },\n\n        getPhoneNumber: function() {\n            fetchNumbers = sdk.platform()\n                .get('/account/~/extension/~/phone-number')\n                .then(response => {\n                    var data = response.json()\n                    numbers = data.records\n                    fetchNumbers = null\n                    return data.records\n                })\n                .catch(e => console.error('Recent Calls Error: ' + e.message))\n            return fetchNumbers\n        },\n\n        hasServiceFeature: function(name) {\n            if (!info)\n                return Error('Need to fetch account info by accountService.getAccountInfo')\n            return info.serviceFeatures\n                .filter(feature => feature.featureName.toLowerCase() === name.toLowerCase())\n                .length > 0\n        },\n\n        listNumber: function(type, features = []) {\n            if (fetchNumbers) {\n                return fetchNumbers.then(() => {\n                    return getNumbersByFeatures(getNumbersByType(numbers, type), features)\n                        .map(number => number.phoneNumber)\n                })\n            }else {\n                return getNumbersByFeatures(getNumbersByType(numbers, type), features)\n                    .map(number => number.phoneNumber)\n            }\n        },\n    }\n})(sdk)\n\nregister('accountService', accountService)\nexport default accountService\n","import sdk from './rc-sdk'\nimport rcSubscription from './rc-subscription-service'\nimport { register } from '../service'\n\nvar rcMessageService = function(sdk) {\n    var messages = {}\n    var fetchingPromise = null\n    var syncToken = null\n    var messageUpdateHandlers = []\n\n    function fullSyncMessages(hour) {\n        return sdk.platform().get('/account/~/extension/~/message-sync', {\n            dateFrom: new Date(Date.now() - hour * 3600 * 1000).toISOString(),\n            syncType: 'FSync'\n        }).then(responses => {\n            var jsonResponse = responses.json()\n            syncToken = jsonResponse.syncInfo.syncToken\n            var results = jsonResponse.records\n            addMessageToList(results)\n            fetchingPromise = null\n            return results\n        })\n    }\n\n    function incrementalSyncMessages() {\n        if (syncToken) {\n            return sdk.platform().get('/account/~/extension/~/message-sync', {\n                syncType: 'ISync',\n                syncToken: syncToken\n            }).then(responses => {\n                var jsonResponse = responses.json()\n                var results = jsonResponse.records\n                syncToken = jsonResponse.syncInfo.syncToken\n                updateMessageList(results)\n                messageUpdateHandlers.forEach(h => h(results))\n            })\n        }\n    }\n\n    function concatMessages() {\n        var results = []\n        for (var key in messages) {\n            if (messages.hasOwnProperty(key)) {\n                results = results.concat(messages[key])\n            }\n        }\n        return results\n    }\n\n    function addMessageToList(results) {\n        results.forEach(message => {\n            if (!messages[message.type]) {\n                messages[message.type] = []\n            }\n            messages[message.type].push(message)\n        })\n    }\n\n    function updateMessageList(results) {\n        results.forEach(message => {\n            var messageList = messages[message.type]\n            if (!messageList) {\n                if (message.availability === 'Alive') {\n                    messages[message.type] = []\n                    messages[message.type].splice(0, 0, message)\n                }\n            }else {\n                var index = 0\n                for (; index < messageList.length; index++) {\n                    if (messageList[index].id === message.id) {\n                        if (message.availability === 'Alive') {\n                            messageList[index] = message\n                        } else {\n                            messageList.splice(index, 1)\n                        }\n                        break\n                    }\n                }\n                if (index === messageList.length) {\n                    if (message.availability === 'Alive') {\n                        messageList.splice(0, 0, message)\n                    }\n                }\n            }\n        })\n    }\n\n    return {\n        syncMessages: function(hour) {\n            fetchingPromise = fullSyncMessages(hour)\n            return fetchingPromise\n        },\n        getMessagesByType: function(type) {\n            if (!fetchingPromise) {\n                if (messages[type]) {\n                    return messages[type]\n                } else {\n                    return []\n                }\n            } else {\n                return fetchingPromise.then(() => {\n                    return messages[type]\n                })\n            }\n        },\n        getAllMessages: function() {\n            return !fetchingPromise ? concatMessages() : fetchingPromise.then(concatMessages)\n        },\n        subscribeToMessageUpdate: function() {\n            rcSubscription.subscribe(\n                'message-store',\n                '/restapi/v1.0/account/~/extension/~/message-store',\n                incrementalSyncMessages\n            )\n        },\n        onMessageUpdated: function(handler) {\n            if (handler) {\n                messageUpdateHandlers.push(handler)\n            }\n        },\n        sendSMSMessage: function(text, fromNumber, toNumber) {\n            return sdk.platform()\n                .post('/account/~/extension/~/sms/', {\n                    from: {phoneNumber: fromNumber},\n                    to: [\n                        {phoneNumber: toNumber}\n                    ],\n                    text: text\n                })\n                .then(response => response.json())\n        },\n        sendPagerMessage: function(text, fromNumber, toNumber) {\n            console.log(fromNumber);\n            return sdk.platform()\n                .post('/account/~/extension/~/company-pager/', {\n                    from: {extensionNumber: fromNumber},\n                    to: [\n                        {extensionNumber: toNumber}\n                    ],\n                    text: text\n                })\n                .then(response => response.json())\n        },\n        getConversation: function(conversationId, hourFrom, hourTo) {\n            return sdk.platform()\n                .get('/account/~/extension/~/message-store', {\n                    dateFrom: new Date(Date.now() - hourFrom * 3600 * 1000).toISOString(),\n                    dateTo: new Date(Date.now() - (hourTo || 0) * 3600 * 1000).toISOString(),\n                    conversationId\n                })\n                .then(response => response.json())\n                .then(data => data.records)\n                .then(records => records.reverse())\n        },\n        getMessagesByNumber: function(phoneNumber, hourFrom, hourTo) {\n            return sdk.platform()\n                .get('/account/~/extension/~/message-store', {\n                    dateFrom: new Date(Date.now() - hourFrom * 3600 * 1000).toISOString(),\n                    dateTo: new Date(Date.now() - (hourTo || 0) * 3600 * 1000).toISOString(),\n                    phoneNumber\n                })\n                .then(response => response.json())\n                .then(data => data.records)\n                .then(records => records.reverse())\n        }\n    }\n}(sdk)\n\nregister('rcMessageService', rcMessageService)\nexport default rcMessageService\n","import sdk from './rc-sdk'\nimport callLogService from './call-log-service'\nimport rcMessageService from './rc-message-service'\nimport { register } from '../service'\nvar conversationService = (function(sdk) {\n    var cachedHour = 24 * 7\n    function groupMessageToContact(msgs, contacts) {\n        var relatedContacts = contacts.filter(contact => {\n            var knownContactsIndex = []\n            var contactNums = contact.phoneNumber.concat(contact.extension)\n            var contactMsgs = msgs.filter((msg, index) => {\n                var msgNumber = msg.direction === 'Inbound' ? msg.from : msg.to\n                var contain = contactNums.indexOf(msgNumber) > -1\n                contact.msg = contact.msg || []\n                var alreadyExist = contact.msg.find(contactMsg => contactMsg.id == msg.id)\n                if (contain && !alreadyExist) {\n                    \n                    contact.msg.push(msg)\n                    knownContactsIndex.push(index)\n                }\n                return contain\n            })\n            knownContactsIndex.reverse().forEach(index => msgs.splice(index, 1))\n            return contactMsgs.length > 0\n        })\n        msgs.forEach(msg => {\n            var msgNumber = msg.direction === 'Inbound' ? msg.from : msg.to\n            var contact = relatedContacts.filter(contact => contact.id === msgNumber)[0]\n            if (contact) {\n                contact.msg.push(msg)\n            } else {\n                relatedContacts.push(fakeContact(msg))\n            }\n        })\n        return relatedContacts\n    }\n\n    function groupContactToMessage(msgs, contacts) {\n        return msgs.map(msg => {\n            var unknownContact = true\n            contacts.forEach(contact => {\n                var contactNums = contact.phoneNumber.concat(contact.extension)\n                var msgNumber = msg.direction === 'Inbound' ? msg.from : msg.to\n                var contain = contactNums.indexOf(msgNumber) > -1\n                if (contain) {\n                    msg.contact = contact\n                    unknownContact = false\n                }\n            })\n            // if (unknownContact) {\n            //     console.log(msg);\n            //     var fake = fakeContact(msg)\n            //     msg.contact = fake\n            //     contacts.push(fake)\n            // }\n            return msg\n        })\n    }\n\n    function combineAdjacentMessage(contents) {\n        // group related SMS message\n        var savedContent\n        var result = []\n        for (let i = contents.length - 1; i > 0; --i) {\n            let content = contents[i]\n            // if (content.type !== 'SMS') {\n            //     if (savedContent) {\n            //         result.push(savedContent)\n            //         savedContent = null\n            //     }\n            //     result.push(content)\n            //     continue\n            // }\n            if (savedContent &&\n                savedContent.type === content.type &&\n                savedContent.contact.id === content.contact.id) {\n                savedContent.others.push(content)\n            } else {\n                savedContent && result.push(savedContent)\n                content.others = []\n                savedContent = content\n            }\n        }\n        savedContent && result.push(savedContent)\n        return result\n    }\n\n    function combine(...targets) {\n        return targets.reduce((result, target) => result.concat(target), [])\n    }\n\n    function sortTime(target) {\n        return target.slice().sort((a, b) =>\n            Date.parse(a.time) -\n            Date.parse(b.time)\n        )\n    }\n    function containSameVal(array1, array2) {\n        return array1.filter(function(n) {\n            return array2.indexOf(n) != -1\n        }).length > 0\n    }\n    function uniqueArray(target) {\n        var seen = {}\n        return target.filter(function(item) {\n            return seen.hasOwnProperty(item) ? false : (seen[item] = true)\n        })\n    }\n\n    function fakeContact(msg) {\n        var phoneNumber = msg.direction === 'Inbound' ? msg.from : msg.to\n        return {\n            displayName: phoneNumber,\n            id: phoneNumber,\n            phoneNumber: [phoneNumber],\n            extension: null,\n            msg: [msg]\n        }\n    }\n\n    function adaptMessage(msg) {\n        return {\n            id:                 msg.id,\n            from:               msg.from.extensionNumber ||\n                                msg.from.phoneNumber,\n            to:                 msg.to.phoneNumber ||\n                                msg.to.extensionNumber ||\n                                msg.to[0].extensionNumber ||\n                                msg.to[0].phoneNumber,\n            direction:          msg.direction,\n            type:               msg.type,\n            time:               msg.creationTime ||\n                                msg.startTime,\n            lastModifiedTime:   msg.lastModifiedTime ||\n                                msg.startTime,\n            subject:            msg.recording ||\n                                msg.subject ||\n                                msg.action ||\n                                msg.attachments[0],\n            status: {\n                sendConfirmed: false,\n                receiveConfirmed: false\n            }\n        }\n    }\n    function getMessagesByNumber(contact, offset) {\n        return Promise.all(contact.phoneNumber.map(\n                    number => rcMessageService.getMessagesByNumber(\n                        // FIXME\n                        number,\n                        cachedHour + offset,\n                        cachedHour\n                    )\n                )\n        )\n        .then(result => combine(...result))\n    }\n    function getCallLogsByNumber(contact, offset) {\n        return Promise.all(contact.phoneNumber.map(\n                    number => callLogService.getCallLogsByNumber(\n                        // FIXME\n                        number,\n                        cachedHour + offset,\n                        cachedHour\n                    )\n                )\n        )\n        .then(result => combine(...result))\n    }\n    function uniqId(target) {\n        var seen = {}\n        return target.filter(function(item) {\n            return seen.hasOwnProperty(item.id) ? false : (seen[item.id] = true)\n        })\n    }\n    function combineContent(...sources) {\n        return sortTime(combine(...sources.map(source => source.map(adaptMessage))))\n    }\n    return {\n        get cachedHour() {\n            return cachedHour\n        },\n        syncContent: function(contacts, ...sources) {\n            var contents = combineContent(...sources)\n            var relatedContacts = groupMessageToContact(contents.slice(), contacts)\n            contents = groupContactToMessage(contents, relatedContacts)\n            return contents\n        },\n        organizeContent: function(contacts, ...sources) {\n            var contents = combineContent(...sources)\n            var relatedContacts = groupMessageToContact(contents.slice(), contacts)\n            contents = groupContactToMessage(contents, relatedContacts)\n            contents = combineAdjacentMessage(contents)\n            return contents\n        },\n        getConversations: function(contacts, ...sources) {\n            var contents = combineContent(...sources)\n            var relatedContacts = groupMessageToContact(contents, contacts)\n                                .map(contact => {\n                                    contact.syncHour = cachedHour\n                                    return contact\n                                })\n                                .map(contact => {\n                                    contact.phoneNumber =\n                                    uniqueArray(contact.phoneNumber.concat(contact.extension))\n                                    return contact\n                                })\n                                .reduce((map, contact) => {\n                                    map[contact.id] = contact\n                                    return map\n                                }, {})\n            return relatedContacts\n        },\n        loadContent: function(contact, offset) {\n            return Promise.all([\n                        getCallLogsByNumber(contact, offset),\n                        getMessagesByNumber(contact, offset)\n                    ])\n                    .then(result => combine(...result))\n                    .then(msgs => msgs.map(adaptMessage))\n                    .then(sortTime)\n                    .then(msgs => {\n                        cachedHour += offset\n                        return msgs\n                    })\n        },\n        onConversationUpdate: function(handler) {\n            rcMessageService.onMessageUpdated(msgs => {\n                try {\n                    var msgs = sortTime(msgs.map(adaptMessage))\n                    handler(msgs)\n                } catch (e) {\n                    console.error(e)\n                    throw e\n                }\n            })\n        },\n        adaptMessage\n    }\n})(sdk)\n\nregister('conversationService', conversationService)\nexport default conversationService\n","import rcMessageService from './rc-message-service'\nimport { register } from '../service'\nvar rcMessageProvider = function() {\n    var messageUpdatedHandlers = []\n    var conversations = {}\n    var cachedHour = 0\n\n    rcMessageService.onMessageUpdated(results => {\n        messageUpdatedHandlers.forEach(h => {\n            try {\n                h(results.slice())\n            } catch (e) {\n                console.error(e)\n            }\n        })\n    })\n\n    function createResult(message) {\n        return {\n            id: message.id,\n            time: message.lastModifiedTime,\n            readStatus: message.readStatus,\n            type: getType(message),\n            contact: getNumber(message.type, getDirection(message, 'Outbound')),\n            subject: message.subject || null,\n            convId: message.conversation? message.conversation.id: null,\n            author: getNumber(message, getDirection(message, 'Inbound'))\n        }\n\n        function getDirection(message, dir) {\n            return message.direction === dir ? message.to[0] : message.from\n        }\n\n        function getNumber(message, info) {\n            return message.type === 'Pager' ? info.extensionNumber : info.phoneNumber\n        }\n\n        function getType(message) {\n            return (message.type === 'Fax' || message.type === 'VoiceMail') ? 'Text' : message.type\n        }\n    }\n\n    return {\n        getTextMessages: function() {\n            return Promise.resolve(rcMessageService.getMessagesByType('SMS')).then(messages => {\n                var results = []\n                messages.forEach(message => {\n                    results.push(createResult(message))\n                })\n                return results\n            })\n        },\n\n        getLastMessagesOfAllType: function() {\n            var results = []\n            return this.getMessagesOfAllType()\n                        .then(msgs => {\n                            for (var key in msgs) {\n                                if (msgs.hasOwnProperty(key)) {\n                                    if (key === 'anonymous')\n                                        results = results.concat(msgs.anonymous[0])\n                                    else\n                                        results.push(msgs[key][0])\n                                }\n                            }\n                            return results\n                        })\n        },\n        // Return all messages of type 'VoiceMail' and 'Fax'. For SMS and Pager, only last message in a conversation\n        // will be returned.\n        getMessagesOfAllType: function() {\n            return Promise.resolve(rcMessageService.getAllMessages()).then(messages => {\n                var results = []\n                var target = {}\n                messages.forEach(message => {\n                    var result = createResult(message)\n                    //Combine SMS/Pager messages in conversation\n                    if (message.conversation && message.conversation.id) {\n                        target[message.conversation.id] = target[message.conversation.id] || []\n                        target[message.conversation.id].push(result)\n                        conversations[message.conversation.id] = conversations[message.conversation.id] || []\n                        conversations[message.conversation.id].push(message)\n                    } else {\n                        target['anonymous'] = target['anonymous'] || []\n                        target['anonymous'].push(result)\n                    }\n                })\n                return target\n            })\n        },\n\n        getConversation: function(convId, hourFrom) {\n            if (conversations[convId] && (!hourFrom || hourFrom < cachedHour)) {\n                return Promise.resolve(conversations[convId].reverse())\n            }\n            else {\n                return rcMessageService.getConversation(\n                    convId,\n                    hourFrom,\n                    cachedHour)\n                .then(result => {\n                    cachedHour = hourFrom\n                    return result\n                })\n            }\n        },\n\n        onMessageUpdated: function(handler) {\n            messageUpdatedHandlers.push(handler)\n        }\n    }\n}()\nregister('rcMessageProvider', rcMessageProvider)\nexport default rcMessageProvider\n\n","import sdk from './rc-sdk';\nimport { register } from '../service';\n\nvar rcConferenceSerivce = function() {\n    var fetchingConferenceInfo = null;\n    \n    function fetchConferenceInfo() {\n        fetchingConferenceInfo = sdk.platform().get('/account/~/extension/~/conferencing')\n            .then(responses => {\n                var jsonResponse = responses.json();\n                var conferenceInfo = {};\n                conferenceInfo.hostCode = jsonResponse.hostCode;\n                conferenceInfo.phoneNumber = jsonResponse.phoneNumber;\n                conferenceInfo.participantCode = jsonResponse.participantCode;\n                fetchingConferenceInfo = null;\n                return conferenceInfo;\n            });\n        return fetchingConferenceInfo;\n    }\n    \n    return {\n        getConferenceInfo: function() {\n            if(fetchingConferenceInfo){\n                return fetchingConferenceInfo;\n            }else{\n                return fetchConferenceInfo();\n            }\n        }\n    };\n}();\n\nregister('rcConferenceSerivce', rcConferenceSerivce);\nexport default rcConferenceSerivce;\n","import { register } from '../service'\nimport rcContactService from '../services/rc-contact-service'\n\nfunction ContactDetailObject() {\n    this.id = null;\n    this.displayName = null;\n    this.extension = null;\n    this.type = null;\n    this.emails = [];\n    this.phoneNumbers = [];\n}\n\nfunction getRCContactForContactDetailWidget(contactId) {\n    for(var i = 0; i <rcContactService.companyContacts.length; i++){\n        var contact = rcContactService.companyContacts[i];\n        if(contact.id === contactId){\n            var result = new ContactDetailObject();\n            result.displayName = contact.displayName;\n            result.extension = contact.extension;\n            result.id = contact.id;\n            result.type = 'rc';\n            contact.phoneNumber.forEach(number => {\n                result.phoneNumbers.push(number); \n            });\n            result.emails.push(contact.email);\n            return result;\n        }\n    }\n}\n\nvar contactDetailWidgetAdapter = (function() {\n    var contactProviders = {};\n    \n    contactProviders['rc'] = getRCContactForContactDetailWidget;\n\n    return {\n        getContact: function(contactId, contactType) {\n            var provider = contactProviders[contactType];\n            if(provider) {\n                return Promise.resolve(provider(contactId)).then(result => {\n                    return result;\n                });\n            }else {\n                throw Error(\"No provider is associated with specified contactType '\" + contactType + \"'\");\n            }\n        }\n    }\n})()\nregister('contactDetailWidgetAdapter', contactDetailWidgetAdapter)\nexport default contactDetailWidgetAdapter\n","var actions = {}\nfunction register(name, action) {\n    actions[name] = action\n}\nfunction getActions() {\n    return actions\n}\nexport {\n    register,\n    getActions\n}\n","import { register } from '../action'\nvar interaction = {\n    show: {\n        before: function() {},\n        method: function(finish) {},\n        after: function(target = this.props.root) {\n            target.classList.remove('display-none')\n        }\n    },\n    hide: {\n        before: function() {},\n        method: function(finish) {},\n        after: function(target = this.props.root) {\n            target.classList.add('display-none')\n        }\n    },\n    diabled: {\n        before: function() {},\n        method: function(finish) {},\n        after: function(target = this.props.root, message) {\n            var mask = document.createElement('div')\n            // FIXME Decouple from rc\n            mask.classList.add('rc-mask')\n            var message = document.createElement('h4')\n            message.classList.add('rc-mask-message')\n            message.textContent = message\n            target.appendChild(mask)\n            this.props.mask = mask\n            return mask\n        }\n    },\n    enable: {\n        before: function() {},\n        method: function(finish) {},\n        after: function() {\n            if (this.props.mask && this.props.mask instanceof HTMLElement) {\n                this.props.mask.parentNode.removeChild(this.props.mask)\n            }\n        }\n    }\n}\nregister('interaction', interaction)\n","function initLogger(level) {\n    return {\n        error: function(...args) {\n            console.error(...args)\n        },\n        warn: function(...args) {\n            if (level > 0)\n                console.warn(...args)\n        },\n        info: function(...args) {\n            if (level > 1)\n                console.info(...args)\n        },\n        log: function(...args) {\n            if (level > 1)\n                console.log(...args)\n        }\n    }\n}\n\nfunction isThenable(result) {\n    if (result.then && typeof result.then === 'function')\n        return true\n    return false\n}\n\nfunction isFunction(fn) {\n    return typeof fn === 'function'\n}\n\nfunction ensureTail(string, tail) {\n    if (string.endsWith(tail))\n        return string\n    return string + tail\n}\n\nfunction toFunction(fn, defalut) {\n    if (fn && isFunction(fn))\n        return fn\n    else if (defalut && isFunction(defalut))\n        return defalut\n    else\n        return function() {}\n}\n\nfunction shallowCopy(target) {\n    if (Array.isArray(target))\n        return target.slice(0)\n    return Object.assign({}, target)\n}\n\nfunction assign(target, name, source) {\n    var tmp = {}\n    tmp[name] = source\n    Object.assign(tmp)\n    return target\n}\n\nexport {\n    initLogger,\n    isThenable,\n    isFunction,\n    toFunction,\n    shallowCopy,\n    ensureTail,\n    assign\n}\n","import {initLogger, isThenable, isFunction, toFunction, shallowCopy, assign} from './util/index'\nvar logger\nvar functionSet = {\n    before: function() {},\n    method: function() {},\n    after: function() {},\n    error: function(e) {\n        logger.error(e)\n        throw e\n    }\n}\nfunction register({actions, data} = settings) {\n    if (!actions)\n        console.warn('Widgets do not have actions defined, maybe you get some typo.');\n    ['init', 'mount', 'unmount', 'destroy', 'error'].forEach(action => {\n        actions[action] = Object.assign(\n            shallowCopy(functionSet),\n            actions[action]\n        )\n    })\n    return widget.bind(null, {actions, data})\n}\n\nfunction widget({actions, data = {}}, options) {\n    if (!options.internal) {\n        return Error('You are trying to construct a widget manually, please use w()')\n    }\n    var defaultActions = shallowCopy(actions)\n    options.actions = shallowCopy(options.actions)\n    this.props = {}\n    this.custom = {}\n    this.data = Object.assign(data, options.data)\n    logger = initLogger(options.logLevel)\n    Object.keys(defaultActions).forEach(index => {\n        defaultActions[index] = bindScope(this, defaultActions[index])\n    })\n    Object.keys(options.actions).forEach(index => {\n        options.actions[index] = bindScope(this, options.actions[index])\n    })\n    Object.keys(defaultActions).forEach(index => {\n        this[index] =\n            generateActions(defaultActions[index], options.actions[index], index)\n    })\n    this.props.dom = generateDocument(this, options.template)\n    this.props.root = getDocumentRoot(options.template)\n    this.props.template = options.template\n    this.mount =\n        generateActions({\n            before: defaultActions.mount.before,\n            method: mount.bind(this, defaultActions.mount.method, this.props.template),\n            after: defaultActions.mount.after\n        }, options.actions.mount, 'mount')\n    this.unmount =\n        generateActions({\n            before: defaultActions.unmount.before,\n            method: unmount.bind(this, defaultActions.unmount.method),\n            after: defaultActions.unmount.after\n        }, options.actions.unmount, 'unmount')\n    this.destroy =\n        generateActions({\n            before: defaultActions.destroy.before,\n            method: destroy.bind(this, defaultActions.destroy.method),\n            after: defaultActions.destroy.after\n        }, options.actions.destroy, 'destroy')\n    this.init()\n\n    function destroy(widgetdestroy, finish) {\n        this.unmount()\n        for (var property in this)\n            this[property] = null\n        if (widgetdestroy && isFunction(widgetdestroy))\n            return widgetdestroy.call(this, finish)\n    }\n\n    function unmount(widgetUnmount, finish) {\n        if (!this.target || !this.target.parentNode)\n            return\n        this.target.parentNode.removeChild(this.target)\n        if (widgetUnmount && isFunction(widgetUnmount))\n            return widgetUnmount.call(this, finish)\n    }\n\n    function mount(widgetMount, template, finish, target, prepend) {\n        if (typeof target === 'string') {\n            target = document.querySelector(target)\n        } else {\n            logger.warn('first argument of mount method should be selector string')\n        }\n        if (this.target) {\n            if (prepend)\n                target.insertBefore(this.target, target.firstChild)\n            else\n                target.appendChild(this.target)\n        } else {\n            // templates can only have one root\n            this.target = shallowCopy(\n              Array.from(template.childNodes)\n                  .filter(node => node.nodeType === 1)\n            )[0]\n            if (prepend)\n                target.insertBefore(template, target.firstChild)\n            else\n                target.appendChild(template)\n        }\n        if (widgetMount && isFunction(widgetMount))\n            return widgetMount.call(this, finish)\n        return this\n    }\n}\n\nfunction bindScope(scope, action) {\n    return {\n        before: toFunction(action.before).bind(scope),\n        method: toFunction(action.method).bind(scope),\n        after: toFunction(action.after).bind(scope),\n        error: toFunction(action.error, logger.error).bind(scope),\n    }\n}\n\nfunction generateDocument(widget, template) {\n    var dom = {}\n    Array.from(template.querySelectorAll('[data-info]')).forEach(doc => {\n        var info = doc.getAttribute('data-info')\n        dom[info] = doc\n    })\n    Array.from(template.querySelectorAll('[data-event]')).forEach(doc => {\n        var events = doc.getAttribute('data-event')\n        events.split('|').forEach(event => {\n            var eventName\n            var action\n            event.split(':').forEach((token, index) => {\n                if (index === 0)\n                    eventName = token\n                else if (index === 1)\n                    action = token\n            })\n            if (!widget[action]) {\n                logger.warn(`No such method:${action} in ${events}, check data-event and widget methods definition.`)\n                return\n            }\n            doc.addEventListener(eventName, widget[action].bind(widget))\n        })\n    })\n    return dom\n}\n\nfunction getDocumentRoot(template) {\n    // Assume the template only have one root\n    return template.querySelector('*')\n}\n\nfunction generateActions(widgetAction, userAction = shallowCopy(functionSet), name) {\n    return function(...args) {\n        var before = function(...args) {\n            logger.info(`[${name}][before](${[].concat(...args)})`)\n            return wrapUserEvent(widgetAction.before, userAction.before, ...args)\n        }\n        var method = function(arg) {\n            logger.info(`[${name}][before](${isFunction(arg) ? arg() : arg})`)\n            if (isFunction(arg))\n                return widgetAction.method(userAction.method, ...arg()) || arg\n            return widgetAction.method(userAction.method, arg) || arg\n        }\n        var after = function(arg) {\n            logger.info(`[${name}][after](${isFunction(arg) ? arg() : arg})`)\n            if (isFunction(arg))\n                return wrapUserEvent(widgetAction.after, userAction.after, ...arg()) || arg\n            return wrapUserEvent(widgetAction.after, userAction.after, arg) || arg\n        }\n        var error = function(e) {\n            return wrapUserEvent(widgetAction.error, userAction.error, e)\n        }\n        var finish = function(arg) {\n            if (isFunction(arg))\n                // flatten one level\n                return Array.isArray(arg()[0]) ? [].concat.apply([], arg()) : arg()[0]\n            return arg\n        }\n        try {\n            return nextAction(before(...args), [before, method, after, finish], error)\n        } catch (e) {\n            error(e)\n        }\n    }\n}\n\nfunction wrapUserEvent(widget, user, ...args) {\n    var continueDefault = (user != null && user(...args))\n    if (continueDefault || typeof continueDefault === 'undefined')\n        return widget(...args) || (() => args)\n    return [].concat(...args)\n}\n\nfunction nextAction(result, actions, error, start = 0) {\n    if (start + 1 === actions.length)\n        return result\n    if (isThenable(result)) {\n        return actions.reduce((res, action, index) => {\n            if (index > start)\n                return res.then(action)\n            return res\n        }, result).catch(error)\n    } else {\n        return nextAction(actions[start + 1](result), actions, error, start + 1)\n    }\n}\n\nexport { register }\n","function transitionIn(effect, target, options = {}) {\n    options && options.before && options.before()\n    target.classList.add(effect)\n    target.classList.add(`${effect}-in`)\n    target.classList.remove(`${effect}-out`)\n    window.setTimeout(() => target.classList.remove(`${effect}-in`), 17)\n    var after = function() {\n        options && options.after && options.after()\n        target.removeEventListener('transitionend', after)\n    }\n    target.addEventListener('transitionend', after)\n}\nfunction transitionOut(effect, target, options = {}) {\n    options && options.before && options.before()\n    target.classList.add(effect)\n    target.classList.remove(`${effect}-in`)\n    window.setTimeout(() => target.classList.add(`${effect}-out`), 17)\n    var after = function() {\n        options && options.after && options.after()\n        target.removeEventListener('transitionend', after)\n    }\n    target.addEventListener('transitionend', after)\n}\nfunction transitionInit(effect, target, options = {}) {\n    options && options.before && options.before()\n    target.classList.add(`${effect}-in`)\n    // window.setTimeout(() => target.classList.add(effect), 17)\n    var after = function() {\n        options && options.after && options.after()\n        target.removeEventListener('transitionend', after)\n    }\n    target.addEventListener('transitionend', after)\n}\nfunction transitionToggle(effect, target, options = {}) {\n    if (target.classList.contains(`${effect}-out`) || target.classList.contains(`${effect}-in`))\n        transitionIn(effect, target, options)\n    else\n        transitionOut(effect, target, options)\n}\nexport {\n    transitionIn,\n    transitionOut,\n    transitionToggle,\n    transitionInit\n}\n","//     (c) 2012 Airbnb, Inc.\n//\n//     polyglot.js may be freely distributed under the terms of the BSD\n//     license. For all licensing information, details, and documention:\n//     http://airbnb.github.com/polyglot.js\n//\n//\n// Polyglot.js is an I18n helper library written in JavaScript, made to\n// work both in the browser and in Node. It provides a simple solution for\n// interpolation and pluralization, based off of Airbnb's\n// experience adding I18n functionality to its Backbone.js and Node apps.\n//\n// Polylglot is agnostic to your translation backend. It doesn't perform any\n// translation; it simply gives you a way to manage translated phrases from\n// your client- or server-side JavaScript application.\n//\n\n\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return factory(root);\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = factory(root);\n  } else {\n    root.Polyglot = factory(root);\n  }\n}(this, function(root) {\n  'use strict';\n\n  var replace = String.prototype.replace;\n\n  // ### Polyglot class constructor\n  function Polyglot(options) {\n    options = options || {};\n    this.phrases = {};\n    this.extend(options.phrases || {});\n    this.currentLocale = options.locale || 'en';\n    this.allowMissing = !!options.allowMissing;\n    this.warn = options.warn || warn;\n  }\n\n  // ### Version\n  Polyglot.VERSION = '1.0.0';\n\n  // ### polyglot.locale([locale])\n  //\n  // Get or set locale. Internally, Polyglot only uses locale for pluralization.\n  Polyglot.prototype.locale = function(newLocale) {\n    if (newLocale) this.currentLocale = newLocale;\n    return this.currentLocale;\n  };\n\n  // ### polyglot.extend(phrases)\n  //\n  // Use `extend` to tell Polyglot how to translate a given key.\n  //\n  //     polyglot.extend({\n  //       \"hello\": \"Hello\",\n  //       \"hello_name\": \"Hello, %{name}\"\n  //     });\n  //\n  // The key can be any string.  Feel free to call `extend` multiple times;\n  // it will override any phrases with the same key, but leave existing phrases\n  // untouched.\n  //\n  // It is also possible to pass nested phrase objects, which get flattened\n  // into an object with the nested keys concatenated using dot notation.\n  //\n  //     polyglot.extend({\n  //       \"nav\": {\n  //         \"hello\": \"Hello\",\n  //         \"hello_name\": \"Hello, %{name}\",\n  //         \"sidebar\": {\n  //           \"welcome\": \"Welcome\"\n  //         }\n  //       }\n  //     });\n  //\n  //     console.log(polyglot.phrases);\n  //     // {\n  //     //   'nav.hello': 'Hello',\n  //     //   'nav.hello_name': 'Hello, %{name}',\n  //     //   'nav.sidebar.welcome': 'Welcome'\n  //     // }\n  //\n  // `extend` accepts an optional second argument, `prefix`, which can be used\n  // to prefix every key in the phrases object with some string, using dot\n  // notation.\n  //\n  //     polyglot.extend({\n  //       \"hello\": \"Hello\",\n  //       \"hello_name\": \"Hello, %{name}\"\n  //     }, \"nav\");\n  //\n  //     console.log(polyglot.phrases);\n  //     // {\n  //     //   'nav.hello': 'Hello',\n  //     //   'nav.hello_name': 'Hello, %{name}'\n  //     // }\n  //\n  // This feature is used internally to support nested phrase objects.\n  Polyglot.prototype.extend = function(morePhrases, prefix) {\n    var phrase;\n\n    for (var key in morePhrases) {\n      if (morePhrases.hasOwnProperty(key)) {\n        phrase = morePhrases[key];\n        if (prefix) key = prefix + '.' + key;\n        if (typeof phrase === 'object') {\n          this.extend(phrase, key);\n        } else {\n          this.phrases[key] = phrase;\n        }\n      }\n    }\n  };\n\n  // ### polyglot.unset(phrases)\n  // Use `unset` to selectively remove keys from a polyglot instance.\n  //\n  //     polyglot.unset(\"some_key\");\n  //     polyglot.unset({\n  //       \"hello\": \"Hello\",\n  //       \"hello_name\": \"Hello, %{name}\"\n  //     });\n  //\n  // The unset method can take either a string (for the key), or an object hash with\n  // the keys that you would like to unset.\n  Polyglot.prototype.unset = function(morePhrases, prefix) {\n    var phrase;\n\n    if (typeof morePhrases === 'string') {\n      delete this.phrases[morePhrases];\n    } else {\n      for (var key in morePhrases) {\n        if (morePhrases.hasOwnProperty(key)) {\n          phrase = morePhrases[key];\n          if (prefix) key = prefix + '.' + key;\n          if (typeof phrase === 'object') {\n            this.unset(phrase, key);\n          } else {\n            delete this.phrases[key];\n          }\n        }\n      }\n    }\n  };\n\n  // ### polyglot.clear()\n  //\n  // Clears all phrases. Useful for special cases, such as freeing\n  // up memory if you have lots of phrases but no longer need to\n  // perform any translation. Also used internally by `replace`.\n  Polyglot.prototype.clear = function() {\n    this.phrases = {};\n  };\n\n  // ### polyglot.replace(phrases)\n  //\n  // Completely replace the existing phrases with a new set of phrases.\n  // Normally, just use `extend` to add more phrases, but under certain\n  // circumstances, you may want to make sure no old phrases are lying around.\n  Polyglot.prototype.replace = function(newPhrases) {\n    this.clear();\n    this.extend(newPhrases);\n  };\n\n\n  // ### polyglot.t(key, options)\n  //\n  // The most-used method. Provide a key, and `t` will return the\n  // phrase.\n  //\n  //     polyglot.t(\"hello\");\n  //     => \"Hello\"\n  //\n  // The phrase value is provided first by a call to `polyglot.extend()` or\n  // `polyglot.replace()`.\n  //\n  // Pass in an object as the second argument to perform interpolation.\n  //\n  //     polyglot.t(\"hello_name\", {name: \"Spike\"});\n  //     => \"Hello, Spike\"\n  //\n  // If you like, you can provide a default value in case the phrase is missing.\n  // Use the special option key \"_\" to specify a default.\n  //\n  //     polyglot.t(\"i_like_to_write_in_language\", {\n  //       _: \"I like to write in %{language}.\",\n  //       language: \"JavaScript\"\n  //     });\n  //     => \"I like to write in JavaScript.\"\n  //\n  Polyglot.prototype.t = function(key, options) {\n    var phrase, result;\n    options = options == null ? {} : options;\n    // allow number as a pluralization shortcut\n    if (typeof options === 'number') {\n      options = {smart_count: options};\n    }\n    if (typeof this.phrases[key] === 'string') {\n      phrase = this.phrases[key];\n    } else if (typeof options._ === 'string') {\n      phrase = options._;\n    } else if (this.allowMissing) {\n      phrase = key;\n    } else {\n      this.warn('Missing translation for key: \"'+key+'\"');\n      result = key;\n    }\n    if (typeof phrase === 'string') {\n      options = clone(options);\n      result = choosePluralForm(phrase, this.currentLocale, options.smart_count);\n      result = interpolate(result, options);\n    }\n    return result;\n  };\n\n\n  // ### polyglot.has(key)\n  //\n  // Check if polyglot has a translation for given key\n  Polyglot.prototype.has = function(key) {\n    return key in this.phrases;\n  };\n\n\n  // #### Pluralization methods\n  // The string that separates the different phrase possibilities.\n  var delimeter = '||||';\n\n  // Mapping from pluralization group plural logic.\n  var pluralTypes = {\n    chinese:   function(n) { return 0; },\n    german:    function(n) { return n !== 1 ? 1 : 0; },\n    french:    function(n) { return n > 1 ? 1 : 0; },\n    russian:   function(n) { return n % 10 === 1 && n % 100 !== 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2; },\n    czech:     function(n) { return (n === 1) ? 0 : (n >= 2 && n <= 4) ? 1 : 2; },\n    polish:    function(n) { return (n === 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2); },\n    icelandic: function(n) { return (n % 10 !== 1 || n % 100 === 11) ? 1 : 0; }\n  };\n\n  // Mapping from pluralization group to individual locales.\n  var pluralTypeToLanguages = {\n    chinese:   ['fa', 'id', 'ja', 'ko', 'lo', 'ms', 'th', 'tr', 'zh'],\n    german:    ['da', 'de', 'en', 'es', 'fi', 'el', 'he', 'hu', 'it', 'nl', 'no', 'pt', 'sv'],\n    french:    ['fr', 'tl', 'pt-br'],\n    russian:   ['hr', 'ru'],\n    czech:     ['cs'],\n    polish:    ['pl'],\n    icelandic: ['is']\n  };\n\n  function langToTypeMap(mapping) {\n    var type, langs, l, ret = {};\n    for (type in mapping) {\n      if (mapping.hasOwnProperty(type)) {\n        langs = mapping[type];\n        for (l in langs) {\n          ret[langs[l]] = type;\n        }\n      }\n    }\n    return ret;\n  }\n\n  // Trim a string.\n  var trimRe = /^\\s+|\\s+$/g;\n  function trim(str){\n    return replace.call(str, trimRe, '');\n  }\n\n  // Based on a phrase text that contains `n` plural forms separated\n  // by `delimeter`, a `locale`, and a `count`, choose the correct\n  // plural form, or none if `count` is `null`.\n  function choosePluralForm(text, locale, count){\n    var ret, texts, chosenText;\n    if (count != null && text) {\n      texts = text.split(delimeter);\n      chosenText = texts[pluralTypeIndex(locale, count)] || texts[0];\n      ret = trim(chosenText);\n    } else {\n      ret = text;\n    }\n    return ret;\n  }\n\n  function pluralTypeName(locale) {\n    var langToPluralType = langToTypeMap(pluralTypeToLanguages);\n    return langToPluralType[locale] || langToPluralType.en;\n  }\n\n  function pluralTypeIndex(locale, count) {\n    return pluralTypes[pluralTypeName(locale)](count);\n  }\n\n  // ### interpolate\n  //\n  // Does the dirty work. Creates a `RegExp` object for each\n  // interpolation placeholder.\n  var dollarRegex = /\\$/g;\n  var dollarBillsYall = '$$$$';\n  function interpolate(phrase, options) {\n    for (var arg in options) {\n      if (arg !== '_' && options.hasOwnProperty(arg)) {\n        // Ensure replacement value is escaped to prevent special $-prefixed\n        // regex replace tokens. the \"$$$$\" is needed because each \"$\" needs to\n        // be escaped with \"$\" itself, and we need two in the resulting output.\n        var replacement = options[arg];\n        if (typeof replacement === 'string') {\n          replacement = replace.call(options[arg], dollarRegex, dollarBillsYall);\n        }\n        // We create a new `RegExp` each time instead of using a more-efficient\n        // string replace so that the same argument can be replaced multiple times\n        // in the same phrase.\n        phrase = replace.call(phrase, new RegExp('%\\\\{'+arg+'\\\\}', 'g'), replacement);\n      }\n    }\n    return phrase;\n  }\n\n  // ### warn\n  //\n  // Provides a warning in the console if a phrase key is missing.\n  function warn(message) {\n    root.console && root.console.warn && root.console.warn('WARNING: ' + message);\n  }\n\n  // ### clone\n  //\n  // Clone an object.\n  function clone(source) {\n    var ret = {};\n    for (var prop in source) {\n      ret[prop] = source[prop];\n    }\n    return ret;\n  }\n\n  return Polyglot;\n}));\n","// Added for convenience in the Node environment.\n// The meat and potatoes exist in ./lib/polyglot.js.\nmodule.exports = require('./lib/polyglot');\n","import Polyglot from 'node-polyglot'\n\nvar polyglots = {}\nvar polyglot = new Polyglot()\nfunction loadLocale(name, file) {\n    fetch(file)\n    .then(response => response.json())\n    .then(data => polyglots[name] = new Polyglot({phrases: data}))\n}\nfunction translate(locale) {\n    return string => polyglots[locale] ? polyglots[locale].t(string) : ''\n}\nexport {\n    loadLocale,\n    translate\n}\n","import { register as registerComponent } from './component'\nimport { getServices } from './service'\nimport { getActions } from './action'\nimport { transitionIn, transitionOut, transitionInit, transitionToggle } from './transition'\nimport { ensureTail } from './util/index'\nimport { loadLocale, translate } from './translation'\n// function fetchWidget(file) {\n//     return fetch(w.options.path + ensureTail(file, '.html'))\n//         .then(response => response.text())\n//         .then(body => {\n//             var template = document.createElement('template')\n//             template.innerHTML = body\n//             var clone = document.importNode(template.content, true)\n//             return clone\n//         })\n// }\n\n// function parseDocument(template) {\n//     return Promise.all(Array.from(template.querySelectorAll('*'))\n//         .filter(doc => doc.tagName.indexOf('-') > -1 || doc instanceof HTMLUnknownElement)\n//         .reduce((result, doc) => {\n//             return result.concat(preload({\n//                 [doc.tagName.toLowerCase()]: doc.tagName.toLowerCase()\n//             }))\n//         }, []))\n// }\n\nfunction initNestedWidget(widget) {\n    var template = widget.props.template\n    var docs = template.querySelectorAll('*')\n    Array.from(docs).forEach(doc => {\n        if (doc.tagName.indexOf('-') > -1 || doc instanceof HTMLUnknownElement) {\n            if (typeof doc.getAttribute('dynamic') !== 'undefine' && doc.getAttribute('dynamic') !== null) {\n                return\n            }\n            var name = doc.tagName.toLowerCase()\n            var child = w(name, widget.custom[name])\n            child.mount(doc)\n            var childName = doc.getAttribute('data-info')\n            if (childName)\n                widget.props[childName] = child\n        }\n    })\n    return widget\n}\n\n// function preload(widgets, callback) {\n//     return Promise.all(\n//         Object.keys(widgets).reduce(\n//             (result, name) => {\n//                 if (!w.templates[name])\n//                     w.templates[name] = {}\n//                 if (!w.templates[name].fetch)\n//                     w.templates[name].fetch = fetchWidget(widgets[name])\n//                 return result.concat(\n//                     w.templates[name].fetch\n//                     .then(template => {\n//                         if (!w.templates[name].template) {\n//                             w.templates[name].template = template\n//                             var scripts = template.querySelectorAll('script')\n//                             var style = template.querySelector('style')\n//                             Array.from(scripts).forEach(script => {\n//                                 if (script.src && script.src.indexOf('http') !== 0)\n//                                     script.src = w.options.path + script.getAttribute('src')\n//                                 document.body.appendChild(script)\n//                                 document.body.removeChild(script)\n//                             })\n//                             if (style)\n//                                 document.head.appendChild(style)\n//                         }\n//                         return template\n//                     })\n//                     .then(parseDocument)\n//                     .catch(err => console.error('Widgets preload error:' + err)))\n//             }, [])\n//     ).then(callback)\n// }\n\n// Public API\n// function w(name, options = {}) {\n//     if (!w.templates[name] || !w.templates[name].widget)\n//         throw Error('you need to preload widget:' + name + ' before init it')\n//     return initNestedWidget(new w.templates[name].widget({\n//         template: w.templates[name].template.cloneNode(true),\n//         actions: options.actions || {},\n//         data: options.data || {},\n//         logLevel: w.options.logLevel,\n//         internal: true // for check it's called by internal\n//     }))\n// }\n\nconst WIDGETS = __w_widgets\nfunction w(name, options = {}) {\n    var widget = WIDGETS[name]\n\n    // template\n    var template = document.createElement('template')\n    template.innerHTML = widget.template\n    var clone = document.importNode(template.content, true)\n    w.templates[name] = w.templates[name] || {}\n    w.templates[name].template = clone\n\n    widget.imports.scripts.forEach(src => {\n        var script = document.createElement('script')\n        script.src = src\n        document.body.appendChild(script)\n    })\n\n     widget.imports.scripts.forEach(src => {\n        var style = document.createElement('style')\n        style.src = src\n        document.head.appendChild(style)\n    })\n\n    // script\n    if (widget.script) {\n        var script = document.createElement('script')\n        script.text = widget.script\n        document.body.appendChild(script)\n        document.body.removeChild(script)\n    }\n    \n    // style\n    if (widget.style) {\n        var style = document.createElement('style')\n        style.innerHTML = widget.style\n        document.head.appendChild(style)\n    }\n    \n\n    return initNestedWidget(new w.templates[name].widget({\n        template: w.templates[name].template.cloneNode(true),\n        actions: options.actions || {},\n        data: options.data || {},\n        logLevel: w.options.logLevel,\n        internal: true // for check it's called by internal\n    }))\n}\n\n\nw.templates = {}\nw.options = {}\nw.register = function(settings) {\n    var settings = new settings()\n    Object.keys(w.templates).forEach(index => {\n        var template = w.templates[index]\n        if (template.template && !template.widget)\n            template.widget = registerComponent(settings)\n    })\n}\nw.config = function(options, callback) {\n    w.options.preload = options.preload || {}\n    w.options.path = options.path || ''\n    w.options.logLevel = options.logLevel || 0\n    w.options.locale = options.locale || {}\n    Promise.all([\n        preload(w.options.preload),\n        Object.keys(w.options.locale).forEach(index => {\n            var locale = w.options.locale[index]\n            loadLocale(index, locale)\n        })\n    ]).then(callback)\n}\nw.customize = function(context, target, options) {\n    // inherit parent's data\n    options.data = Object.assign(context.data , options.data)\n    context.custom[target] = options\n}\nw.service = getServices\nw.action = function(name) {\n    return Object.assign({}, getActions()[name])\n}\nw.transition = function(effect) {\n    return {\n        init: (target, options) => transitionInit(effect, target, options),\n        in: (target, options) => transitionIn(effect, target, options),\n        out: (target, options) => transitionOut(effect, target, options),\n        toggle: (target, options) => transitionToggle(effect, target, options)\n    }\n}\nw.locale = loadLocale\nw.translate = translate\nw.t = translate\nexport default w\n"],"sourceRoot":"/source/"}