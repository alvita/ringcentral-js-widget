{"version":3,"sources":["components/DialPad/index.js"],"names":["DialPad","keyConfig","value","text","alternativeValue","ALTERNATIVE_TIMEOUT","DialButton","props","args","state","pressed","timeout","document","createElement","btn","audio","src","onMouseDown","canPlayType","currentTime","play","onPress","setTimeout","clearTimeout","onOutput","setState","alternativeTimeout","onMouseUp","onMouseLeave","btnPlaceholder","btnSvg","btnSvgGroup","circle","btnValue","btnText","propTypes","shape","string","isRequired","func","number","root","className","map","row","rowIdx","hideSpecial","onButtonPress","onButtonOutput","bool"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component, PropTypes } from 'react';\nimport classnames from 'classnames';\nimport styles from './styles.scss';\nimport audios from './audios';\n\nconst keyConfig = [\n  [{ value: '1', text: '' }, { value: '2', text: 'ABC' }, { value: '3', text: 'DEF' }],\n  [{ value: '4', text: 'GHI' }, { value: '5', text: 'JKL' }, { value: '6', text: 'MON' }],\n  [{ value: '7', text: 'PQRS' }, { value: '8', text: 'TUV' }, { value: '9', text: 'WXYZ' }],\n  [\n    { value: '*', text: '' },\n    { value: '0', text: '+', alternativeValue: '+' },\n    { value: '#', text: '' },\n  ],\n];\n\nconst ALTERNATIVE_TIMEOUT = 1000;\n\nclass DialButton extends Component {\n  constructor(props, ...args) {\n    super(props, ...args);\n    this.state = {\n      pressed: false,\n    };\n    this.timeout = null;\n    if (typeof document !== 'undefined' && document.createElement && audios[props.btn.value]) {\n      this.audio = document.createElement('audio');\n      this.audio.src = audios[props.btn.value];\n    }\n    this.onMouseDown = () => {\n      if (this.audio && this.audio.canPlayType('audio/ogg') !== '') {\n        this.audio.currentTime = 0;\n        this.audio.play();\n      }\n      if (typeof this.props.onPress === 'function') {\n        this.props.onPress(this.props.btn.value);\n      }\n\n      this.timeout = setTimeout(() => {\n        if (this.state.pressed) {\n          if (this.timeout) {\n            clearTimeout(this.timeout);\n            this.timeout = null;\n          }\n          if (typeof this.props.onOutput === 'function') {\n            this.props.onOutput(this.props.btn.alternativeValue || this.props.btn.value);\n          }\n          this.setState({\n            pressed: false,\n          });\n        }\n      }, this.props.alternativeTimeout || ALTERNATIVE_TIMEOUT);\n\n      this.setState({\n        pressed: true,\n      });\n    };\n    this.onMouseUp = () => {\n      if (this.state.pressed) {\n        if (this.timeout) {\n          clearTimeout(this.timeout);\n          this.timeout = null;\n        }\n        if (typeof this.props.onOutput === 'function') {\n          this.props.onOutput(this.props.btn.value);\n        }\n        this.setState({\n          pressed: false,\n        });\n      }\n    };\n    this.onMouseLeave = () => {\n      if (this.state.pressed) {\n        if (this.timeout) {\n          clearTimeout(this.timeout);\n          this.timeout = null;\n        }\n        this.setState({\n          pressed: false,\n        });\n      }\n    };\n  }\n  render() {\n    return (\n      <div className={styles.btnPlaceholder}>\n        <svg className={styles.btnSvg} viewBox=\"0 0 500 500\">\n          <g\n            className={classnames(\n              styles.btnSvgGroup,\n              this.state.pressed && styles.pressed\n            )}\n            onMouseUp={this.onMouseUp}\n            onMouseDown={this.onMouseDown}\n            onMouseLeave={this.onMouseLeave}>\n            <circle\n              className={styles.circle}\n              cx=\"250\"\n              cy=\"250\"\n              r=\"200\"\n            />\n            <text\n              className={styles.btnValue}\n              x=\"250\"\n              y=\"280\">\n              {this.props.btn.value}\n            </text>\n            <text\n              className={styles.btnText}\n              x=\"250\"\n              y=\"380\">\n              {this.props.btn.text}\n            </text>\n          </g>\n        </svg>\n      </div>\n    );\n  }\n}\n\nDialButton.propTypes = {\n  btn: PropTypes.shape({\n    value: PropTypes.string.isRequired,\n    text: PropTypes.string,\n    alternativeValue: PropTypes.string,\n  }).isRequired,\n  audio: PropTypes.string,\n  onPress: PropTypes.func,\n  onOutput: PropTypes.func,\n  alternativeTimeout: PropTypes.number,\n};\n\nexport default function DialPad(props) {\n  return (\n    <div className={classnames(styles.root, props.className)}>\n      {keyConfig.map((row, rowIdx) => (\n        <div key={rowIdx} className={styles.row}>\n          {row.map(btn => {\n            if (props.hideSpecial && (btn.value === '*' || btn.value === '#')) {\n              return (\n                <div key={btn.value} className={styles.btnPlaceholder} />\n              );\n            }\n            return (\n              <DialButton\n                key={btn.value}\n                btn={btn}\n                onPress={props.onButtonPress}\n                onOutput={props.onButtonOutput}\n                alternativeTimeout={props.alternativeTimeout}\n              />\n            );\n          })}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nDialPad.propTypes = {\n  className: PropTypes.string,\n  hideSpecial: PropTypes.bool,\n  onButtonPress: PropTypes.func,\n  onButtonOutput: PropTypes.func,\n  alternativeTimeout: PropTypes.number,\n};\n"]}