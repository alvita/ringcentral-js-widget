<div class='rc-panel rc-call-panel'>
    <div class='rc-panel__header rc-panel__header--colored rc-panel__header--center'>
        <h1 data-info='name'>Incoming call</h1>
    </div>
    <div class='rc-panel__content' data-info='panel'>
        <div class='rc-call-panel__center' data-info='img-wrapper'>
            <img class='rc-img' src=''>
        </div>
        <div class='rc-call-panel__footer'>
            <button class='rc-button rc-call-panel__reply'>Reply with Messages</button>
            <div class='action-panel text-center'>
                <button 
                    data-info='accept'
                    class='rc-button rc-button--positive rc-button--round action-panel__action'>Accept</button>
                <button
                    data-info='ignore' 
                    class='rc-button rc-button--negative rc-button--round action-panel__action'>Ignore</button>
            </div>
        </div>
    </div>
</div>
<script>
var circle = w.transition('circle')
var fade = w.transition('fade')
this.props = {
    name: null,
    target: null,
    remoteVideo: null,
    localVideo: null,
    session: null,
    width: 250,
    height: 400,
    simple: false
}
this.actions = {
    init: {
        method: function(finish) {
            return finish()
        },
        after: function() {
            this.props.target = this.data.target
            this.props.remoteVideo = this.data.remoteVideo
            this.props.localVideo = this.data.localVideo
            this.props.width = this.data.width
            this.props.height = this.data.height

            this.root.firstChild.style.width = this.props.width + 'px'
            this.root.firstChild.style.height = this.props.height + 'px'
        }
    },
    mount: {
        after: function() {
            fade.init(this.root)
            fade.in(this.root)
        }
    },
    setName: {
        method: function(finish, value) {
            this.props.name = value
            this.dom.name.textContent = value
        }
    },
    ignore: {
        method: function(finish) {
            return finish()
        },
        after: function() {
            this.unmount()
        }
    },
    accept: {
        method: function(finish) {
            return finish()
        }
    },
    simplify: {
        before: function(bool) {
            if (bool) {
                this.dom.panel.classList.add('rc-panel__content--min')
                this.dom['img-wrapper'].classList.add('display-none')
            } else {
                this.dom.panel.classList.remove('rc-panel__content--min')
                this.dom['img-wrapper'].classList.remove('display-none')
            }
        }
    }
}
this.on('click', function(e) {
    if (e.target === this.dom.accept)
        this.accept()
    if (e.target === this.dom.ignore)
        this.ignore()
})
</script>
